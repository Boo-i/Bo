<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø³ØªÙ…Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯ - Bright Kids</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', Arial, sans-serif;
            direction: rtl;
            text-align: right;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #FF6B35 0%, #4A90E2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin: 0.25rem 0;
        }

        .form-container {
            padding: 2rem;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(135deg, #FF6B35 0%, #4A90E2 100%);
            height: 100%;
            width: 25%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .step-indicator {
            text-align: center;
            margin-bottom: 2rem;
            color: #4A90E2;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .section-title {
            color: #4A90E2;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #FF6B35;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .required {
            color: #FF6B35;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4A90E2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
            transform: translateY(-2px);
        }

        .radio-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.75rem 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: white;
        }

        .radio-item:hover {
            border-color: #4A90E2;
            background: rgba(74, 144, 226, 0.05);
        }

        .radio-item input[type="radio"]:checked + span {
            color: #4A90E2;
            font-weight: 600;
        }

        .file-upload {
            border: 3px dashed #4A90E2;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(74, 144, 226, 0.02);
        }

        .file-upload:hover {
            border-color: #FF6B35;
            background: rgba(255, 107, 53, 0.05);
            transform: translateY(-2px);
        }

        .file-upload-icon {
            font-size: 3rem;
            color: #4A90E2;
            margin-bottom: 1rem;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #e1e5e9;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .footer {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(74, 144, 226, 0.05);
            border-radius: 10px;
        }

        .footer a {
            color: #4A90E2;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .success-message {
            background: linear-gradient(135deg, #6BCF7F 0%, #4CAF50 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            margin: 2rem 0;
        }

        .success-message h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .ticket {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px dashed #4A90E2;
        }

        .ticket-header {
            text-align: center;
            border-bottom: 2px solid #e1e5e9;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }

        .ticket-number {
            font-size: 2rem;
            font-weight: bold;
            color: #FF6B35;
            margin-bottom: 0.5rem;
        }

        .ticket-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .info-item {
            padding: 0.5rem;
            border-radius: 8px;
            background: rgba(74, 144, 226, 0.05);
        }

        .info-label {
            font-weight: 600;
            color: #4A90E2;
            font-size: 0.9rem;
        }

        .info-value {
            color: #333;
            font-size: 1rem;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4A90E2;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 1px solid #f5c6cb;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .navigation {
                flex-direction: column;
                gap: 1rem;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .radio-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">BK</div>
            <h1>Ø§Ø³ØªÙ…Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯</h1>
            <p>Ù…Ø±ÙƒØ² Bright Kids Ù„Ù„Ø­Ø¶Ø§Ù†Ø© - YADC7069</p>
            <p>Ø­ÙŠ Ù‚Ø±Ø·Ø¨Ø©ØŒ 46429ØŒ ÙŠÙ†Ø¨Ø¹ | +966 53 750 6160</p>
        </div>

        <div class="form-container">
            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <!-- Step Indicator -->
            <div class="step-indicator" id="stepIndicator">
                Ø§Ù„Ø®Ø·ÙˆØ© 1 Ù…Ù† 3: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„
            </div>

            <!-- Loading -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨...</p>
            </div>

            <!-- Form -->
            <form id="registrationForm" enctype="multipart/form-data">
                <div class="form-step" id="formContent">
                    <div class="form-section">
                        <h2 class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„</h2>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="childName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø·ÙÙ„ <span class="required">*</span></label>
                                <input type="text" id="childName" name="childName" required placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
                            </div>

                            <div class="form-group">
                                <label for="birthDate">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ <span class="required">*</span></label>
                                <input type="date" id="birthDate" name="birthDate" required>
                            </div>

                            <div class="form-group">
                                <label for="age">Ø§Ù„Ø¹Ù…Ø± <span class="required">*</span></label>
                                <input type="text" id="age" name="age" required placeholder="Ù…Ø«Ø§Ù„: Ø³Ù†ØªØ§Ù† Ùˆ 6 Ø£Ø´Ù‡Ø±">
                            </div>

                            <div class="form-group">
                                <label>Ø§Ù„Ø¬Ù†Ø³ <span class="required">*</span></label>
                                <div class="radio-group">
                                    <label class="radio-item">
                                        <input type="radio" name="gender" value="Ø°ÙƒØ±" required>
                                        <span>Ø°ÙƒØ±</span>
                                    </label>
                                    <label class="radio-item">
                                        <input type="radio" name="gender" value="Ø£Ù†Ø«Ù‰" required>
                                        <span>Ø£Ù†Ø«Ù‰</span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="nationality">Ø§Ù„Ø¬Ù†Ø³ÙŠØ© <span class="required">*</span></label>
                                <input type="text" id="nationality" name="nationality" required placeholder="Ø§Ù„Ø¬Ù†Ø³ÙŠØ©">
                            </div>

                            <div class="form-group">
                                <label for="birthPlace">Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ <span class="required">*</span></label>
                                <input type="text" id="birthPlace" name="birthPlace" required placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯">
                            </div>

                            <div class="form-group full-width">
                                <label>ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„ <span class="required">*</span></label>
                                <div class="file-upload" onclick="document.getElementById('childPhoto').click()">
                                    <div class="file-upload-icon">ğŸ“·</div>
                                    <p>Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„</p>
                                    <small>ÙŠÙÙØ¶Ù„ ØµÙˆØ±Ø© ÙˆØ§Ø¶Ø­Ø© ÙˆØ­Ø¯ÙŠØ«Ø©</small>
                                    <input type="file" id="childPhoto" name="childPhoto" accept="image/*" style="display: none;" required>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="navigation" id="navigation">
                    <button type="button" class="btn btn-secondary" id="prevBtn" onclick="prevStep()" disabled>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                </div>
            </form>

            <!-- Footer -->
            <div class="footer">
                <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ø¨Ù€ (*) Ù…Ø·Ù„ÙˆØ¨Ø©</p>
                <p>
                    Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©: +966 53 750 6160 | 
                    <a href="https://www.google.com/maps/dir/?api=1&destination=24.0857962992111%2C38.0875255905884" target="_blank">
                        Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
                    </a>
                </p>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 3;
        let formData = {};

        const stepNames = [
            'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„',
            'Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±', 
            'Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ¥Ø±Ø³Ø§Ù„'
        ];

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const stepIndicator = document.getElementById('stepIndicator');
            const prevBtn = document.getElementById('prevBtn');
            
            const percentage = (currentStep / totalSteps) * 100;
            progressFill.style.width = percentage + '%';
            
            stepIndicator.textContent = `Ø§Ù„Ø®Ø·ÙˆØ© ${currentStep} Ù…Ù† ${totalSteps}: ${stepNames[currentStep - 1]}`;
            
            prevBtn.disabled = currentStep === 1;
        }

        function collectFormData() {
            const form = document.getElementById('registrationForm');
            const formDataObj = new FormData(form);
            
            for (let [key, value] of formDataObj.entries()) {
                formData[key] = value;
            }
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                collectFormData();
                currentStep++;
                updateProgress();
                
                if (currentStep === 2) {
                    showStep2();
                } else if (currentStep === 3) {
                    showStep3();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgress();
                
                if (currentStep === 1) {
                    showStep1();
                } else if (currentStep === 2) {
                    showStep2();
                }
            }
        }

        function showStep1() {
            const formContent = document.getElementById('formContent');
            formContent.innerHTML = `
                <div class="form-section">
                    <h2 class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="childName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø·ÙÙ„ <span class="required">*</span></label>
                            <input type="text" id="childName" name="childName" required placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" value="${formData.childName || ''}">
                        </div>

                        <div class="form-group">
                            <label for="birthDate">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ <span class="required">*</span></label>
                            <input type="date" id="birthDate" name="birthDate" required value="${formData.birthDate || ''}">
                        </div>

                        <div class="form-group">
                            <label for="age">Ø§Ù„Ø¹Ù…Ø± <span class="required">*</span></label>
                            <input type="text" id="age" name="age" required placeholder="Ù…Ø«Ø§Ù„: Ø³Ù†ØªØ§Ù† Ùˆ 6 Ø£Ø´Ù‡Ø±" value="${formData.age || ''}">
                        </div>

                        <div class="form-group">
                            <label>Ø§Ù„Ø¬Ù†Ø³ <span class="required">*</span></label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="gender" value="Ø°ÙƒØ±" required ${formData.gender === 'Ø°ÙƒØ±' ? 'checked' : ''}>
                                    <span>Ø°ÙƒØ±</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="gender" value="Ø£Ù†Ø«Ù‰" required ${formData.gender === 'Ø£Ù†Ø«Ù‰' ? 'checked' : ''}>
                                    <span>Ø£Ù†Ø«Ù‰</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="nationality">Ø§Ù„Ø¬Ù†Ø³ÙŠØ© <span class="required">*</span></label>
                            <input type="text" id="nationality" name="nationality" required placeholder="Ø§Ù„Ø¬Ù†Ø³ÙŠØ©" value="${formData.nationality || ''}">
                        </div>

                        <div class="form-group">
                            <label for="birthPlace">Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ <span class="required">*</span></label>
                            <input type="text" id="birthPlace" name="birthPlace" required placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯" value="${formData.birthPlace || ''}">
                        </div>
                    </div>
                </div>
            `;
            
            updateNavigation();
        }

        function showStep2() {
            const formContent = document.getElementById('formContent');
            formContent.innerHTML = `
                <div class="form-section">
                    <h2 class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="parentName">Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± <span class="required">*</span></label>
                            <input type="text" id="parentName" name="parentName" required placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±" value="${formData.parentName || ''}">
                        </div>

                        <div class="form-group">
                            <label for="relationship">ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø© <span class="required">*</span></label>
                            <select id="relationship" name="relationship" required>
                                <option value="">Ø§Ø®ØªØ± ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø©</option>
                                <option value="Ø§Ù„Ø£Ø¨" ${formData.relationship === 'Ø§Ù„Ø£Ø¨' ? 'selected' : ''}>Ø§Ù„Ø£Ø¨</option>
                                <option value="Ø§Ù„Ø£Ù…" ${formData.relationship === 'Ø§Ù„Ø£Ù…' ? 'selected' : ''}>Ø§Ù„Ø£Ù…</option>
                                <option value="Ø§Ù„Ø¬Ø¯" ${formData.relationship === 'Ø§Ù„Ø¬Ø¯' ? 'selected' : ''}>Ø§Ù„Ø¬Ø¯</option>
                                <option value="Ø§Ù„Ø¬Ø¯Ø©" ${formData.relationship === 'Ø§Ù„Ø¬Ø¯Ø©' ? 'selected' : ''}>Ø§Ù„Ø¬Ø¯Ø©</option>
                                <option value="Ø§Ù„Ø¹Ù…" ${formData.relationship === 'Ø§Ù„Ø¹Ù…' ? 'selected' : ''}>Ø§Ù„Ø¹Ù…</option>
                                <option value="Ø§Ù„Ø¹Ù…Ø©" ${formData.relationship === 'Ø§Ù„Ø¹Ù…Ø©' ? 'selected' : ''}>Ø§Ù„Ø¹Ù…Ø©</option>
                                <option value="Ø§Ù„Ø®Ø§Ù„" ${formData.relationship === 'Ø§Ù„Ø®Ø§Ù„' ? 'selected' : ''}>Ø§Ù„Ø®Ø§Ù„</option>
                                <option value="Ø§Ù„Ø®Ø§Ù„Ø©" ${formData.relationship === 'Ø§Ù„Ø®Ø§Ù„Ø©' ? 'selected' : ''}>Ø§Ù„Ø®Ø§Ù„Ø©</option>
                                <option value="Ø£Ø®Ø±Ù‰" ${formData.relationship === 'Ø£Ø®Ø±Ù‰' ? 'selected' : ''}>Ø£Ø®Ø±Ù‰</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="phoneNumber">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ <span class="required">*</span></label>
                            <input type="tel" id="phoneNumber" name="phoneNumber" required placeholder="+966 53 750 6160" value="${formData.phoneNumber || ''}">
                        </div>

                        <div class="form-group">
                            <label for="emergencyPhone">Ø±Ù‚Ù… Ø¢Ø®Ø± Ù„Ù„Ø·ÙˆØ§Ø±Ø¦ <span class="required">*</span></label>
                            <input type="tel" id="emergencyPhone" name="emergencyPhone" required placeholder="Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ Ø¢Ø®Ø± Ù„Ù„Ø·ÙˆØ§Ø±Ø¦" value="${formData.emergencyPhone || ''}">
                        </div>

                        <div class="form-group">
                            <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ <span class="required">*</span></label>
                            <input type="email" id="email" name="email" required placeholder="example@email.com" value="${formData.email || ''}">
                        </div>

                        <div class="form-group full-width">
                            <label for="address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† <span class="required">*</span></label>
                            <textarea id="address" name="address" rows="3" required placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„">${formData.address || ''}</textarea>
                        </div>
                    </div>
                </div>
            `;
            
            updateNavigation();
        }

        function showStep3() {
            collectFormData();
            
            const formContent = document.getElementById('formContent');
            formContent.innerHTML = `
                <div class="form-section">
                    <h2 class="section-title">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
                    
                    <div class="ticket">
                        <div class="ticket-header">
                            <div class="ticket-number">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø·Ù„Ø¨</div>
                            <p>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…: ${new Date().toLocaleDateString('ar-SA')}</p>
                        </div>
                        
                        <div class="ticket-info">
                            <div class="info-item">
                                <div class="info-label">Ø§Ø³Ù… Ø§Ù„Ø·ÙÙ„</div>
                                <div class="info-value">${formData.childName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</div>
                                <div class="info-value">${formData.birthDate || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø§Ù„Ø¹Ù…Ø±</div>
                                <div class="info-value">${formData.age || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø§Ù„Ø¬Ù†Ø³</div>
                                <div class="info-value">${formData.gender || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</div>
                                <div class="info-value">${formData.parentName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø©</div>
                                <div class="info-value">${formData.relationship || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</div>
                                <div class="info-value">${formData.phoneNumber || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
                                <div class="info-value">${formData.email || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid #e1e5e9;">
                            <p style="text-align: center; color: #666; font-size: 0.9rem;">
                                ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­ØªÙ‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            updateNavigation();
        }

        function updateNavigation() {
            const navigation = document.getElementById('navigation');
            
            if (currentStep === totalSteps) {
                navigation.innerHTML = `
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button type="button" class="btn btn-primary" onclick="submitForm()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
                `;
            } else {
                navigation.innerHTML = `
                    <button type="button" class="btn btn-secondary" id="prevBtn" onclick="prevStep()" ${currentStep === 1 ? 'disabled' : ''}>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                `;
            }
        }

        async function submitForm() {
            try {
                // Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                document.getElementById('loading').classList.add('show');
                document.getElementById('formContent').style.display = 'none';
                document.getElementById('navigation').style.display = 'none';
                
                // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                collectFormData();
                
                // Ø¥Ù†Ø´Ø§Ø¡ FormData Ù„Ù„Ø¥Ø±Ø³Ø§Ù„
                const form = document.getElementById('registrationForm');
                const submitData = new FormData(form);
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¬Ù…Ø¹Ø©
                for (const [key, value] of Object.entries(formData)) {
                    if (typeof value === 'string') {
                        submitData.set(key, value);
                    }
                }
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©
                const response = await fetch('http://localhost:5000/api/registration/submit', {
                    method: 'POST',
                    body: submitData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                    document.getElementById('loading').classList.remove('show');
                    
                    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ ÙˆØ§Ù„ÙƒÙˆØ¨ÙˆÙ†
                    showSuccessMessage(result);
                } else {
                    throw new Error(result.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹');
                }
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨:', error);
                
                // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                document.getElementById('loading').classList.remove('show');
                
                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
                showErrorMessage(error.message);
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                document.getElementById('formContent').style.display = 'block';
                document.getElementById('navigation').style.display = 'flex';
            }
        }

        function showSuccessMessage(result) {
            const formContent = document.getElementById('formContent');
            const ticketData = result.ticket_data;
            
            formContent.innerHTML = `
                <div class="success-message">
                    <h2>ğŸ‰ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!</h2>
                    <p>Ø±Ù‚Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„: <strong>${ticketData.registration_number}</strong></p>
                    <p>Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙƒÙ… Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©</p>
                </div>
                
                <div class="ticket">
                    <div class="ticket-header">
                        <div class="ticket-number">${ticketData.registration_number}</div>
                        <p>ÙƒÙˆØ¨ÙˆÙ† ØªØ³Ø¬ÙŠÙ„ Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯</p>
                        <p>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…: ${ticketData.submission_date}</p>
                    </div>
                    
                    <div class="ticket-info">
                        <div class="info-item">
                            <div class="info-label">Ø§Ø³Ù… Ø§Ù„Ø·ÙÙ„</div>
                            <div class="info-value">${ticketData.child_name}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</div>
                            <div class="info-value">${ticketData.parent_name}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</div>
                            <div class="info-value">${ticketData.phone}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
                            <div class="info-value">${ticketData.email}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</div>
                            <div class="info-value" style="color: #FF6B35; font-weight: bold;">${ticketData.status}</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid #e1e5e9; text-align: center;">
                        <p style="color: #4A90E2; font-weight: 600;">${ticketData.nursery_info.name}</p>
                        <p style="color: #666; font-size: 0.9rem;">${ticketData.nursery_info.address}</p>
                        <p style="color: #666; font-size: 0.9rem;">${ticketData.nursery_info.phone} | ${ticketData.nursery_info.license}</p>
                    </div>
                </div>
            `;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰
            formContent.style.display = 'block';
            
            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ÙˆÙ…Ø¤Ø´Ø± Ø§Ù„Ø®Ø·ÙˆØ©
            document.querySelector('.progress-bar').style.display = 'none';
            document.getElementById('stepIndicator').style.display = 'none';
        }

        function showErrorMessage(message) {
            const formContent = document.getElementById('formContent');
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.innerHTML = `
                <strong>Ø®Ø·Ø£:</strong> ${message}
                <br><small>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ù„Ù‰ +966 53 750 6160</small>
            `;
            
            formContent.insertBefore(errorDiv, formContent.firstChild);
            
            // Ø¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.parentNode.removeChild(errorDiv);
                }
            }, 10000);
        }

        // File upload handling
        document.addEventListener('change', function(e) {
            if (e.target.type === 'file') {
                const file = e.target.files[0];
                if (file) {
                    const fileUpload = e.target.parentElement;
                    fileUpload.innerHTML = `
                        <div class="file-upload-icon">âœ…</div>
                        <p>ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù: ${file.name}</p>
                        <small>Ø§Ø¶ØºØ· Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù„Ù</small>
                        <input type="file" id="${e.target.id}" name="${e.target.name}" accept="${e.target.accept}" style="display: none;" required>
                    `;
                    fileUpload.style.borderColor = '#6BCF7F';
                    fileUpload.style.background = 'rgba(108, 207, 127, 0.1)';
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø¨Ø· Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø±
                    fileUpload.onclick = function() {
                        document.getElementById(e.target.id).click();
                    };
                }
            }
        });

        // Initialize
        updateProgress();
    </script>
</body>
</html>


<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø³ØªÙ…Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯ - Bright Kids</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', Arial, sans-serif;
            direction: rtl;
            text-align: right;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #FF6B35 0%, #4A90E2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin: 0.25rem 0;
        }

        .form-container {
            padding: 2rem;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(135deg, #FF6B35 0%, #4A90E2 100%);
            height: 100%;
            width: 25%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .step-indicator {
            text-align: center;
            margin-bottom: 2rem;
            color: #4A90E2;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .section-title {
            color: #4A90E2;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #FF6B35;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .required {
            color: #FF6B35;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4A90E2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
            transform: translateY(-2px);
        }

        .radio-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.75rem 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: white;
        }

        .radio-item:hover {
            border-color: #4A90E2;
            background: rgba(74, 144, 226, 0.05);
        }

        .radio-item input[type="radio"]:checked + span {
            color: #4A90E2;
            font-weight: 600;
        }

        .file-upload {
            border: 3px dashed #4A90E2;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(74, 144, 226, 0.02);
        }

        .file-upload:hover {
            border-color: #FF6B35;
            background: rgba(255, 107, 53, 0.05);
            transform: translateY(-2px);
        }

        .file-upload-icon {
            font-size: 3rem;
            color: #4A90E2;
            margin-bottom: 1rem;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #e1e5e9;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .footer {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(74, 144, 226, 0.05);
            border-radius: 10px;
        }

        .footer a {
            color: #4A90E2;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .navigation {
                flex-direction: column;
                gap: 1rem;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .radio-group {
                flex-direction: column;
            }
        }

        .form-step {
            animation: slideIn 0.3s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .success-message {
            background: linear-gradient(135deg, #6BCF7F 0%, #4CAF50 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            margin: 2rem 0;
        }

        .success-message h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .ticket {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px dashed #4A90E2;
        }

        .ticket-header {
            text-align: center;
            border-bottom: 2px solid #e1e5e9;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }

        .ticket-number {
            font-size: 2rem;
            font-weight: bold;
            color: #FF6B35;
            margin-bottom: 0.5rem;
        }

        .ticket-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .info-item {
            padding: 0.5rem;
            border-radius: 8px;
            background: rgba(74, 144, 226, 0.05);
        }

        .info-label {
            font-weight: 600;
            color: #4A90E2;
            font-size: 0.9rem;
        }

        .info-value {
            color: #333;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">BK</div>
            <h1>Ø§Ø³ØªÙ…Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯</h1>
            <p>Ù…Ø±ÙƒØ² Bright Kids Ù„Ù„Ø­Ø¶Ø§Ù†Ø© - YADC7069</p>
            <p>Ø­ÙŠ Ù‚Ø±Ø·Ø¨Ø©ØŒ 46429ØŒ ÙŠÙ†Ø¨Ø¹ | +966 53 750 6160</p>
        </div>

        <div class="form-container">
            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <!-- Step Indicator -->
            <div class="step-indicator" id="stepIndicator">
                Ø§Ù„Ø®Ø·ÙˆØ© 1 Ù…Ù† 8: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„
            </div>

            <!-- Form -->
            <form id="registrationForm">
                <div class="form-step" id="formContent">
                    <div class="form-section">
                        <h2 class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„</h2>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="childName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø·ÙÙ„ <span class="required">*</span></label>
                                <input type="text" id="childName" name="childName" required placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
                            </div>

                            <div class="form-group">
                                <label for="birthDate">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ <span class="required">*</span></label>
                                <input type="date" id="birthDate" name="birthDate" required>
                            </div>

                            <div class="form-group">
                                <label for="age">Ø§Ù„Ø¹Ù…Ø± <span class="required">*</span></label>
                                <input type="text" id="age" name="age" required placeholder="Ù…Ø«Ø§Ù„: Ø³Ù†ØªØ§Ù† Ùˆ 6 Ø£Ø´Ù‡Ø±">
                            </div>

                            <div class="form-group">
                                <label>Ø§Ù„Ø¬Ù†Ø³ <span class="required">*</span></label>
                                <div class="radio-group">
                                    <label class="radio-item">
                                        <input type="radio" name="gender" value="Ø°ÙƒØ±" required>
                                        <span>Ø°ÙƒØ±</span>
                                    </label>
                                    <label class="radio-item">
                                        <input type="radio" name="gender" value="Ø£Ù†Ø«Ù‰" required>
                                        <span>Ø£Ù†Ø«Ù‰</span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="nationality">Ø§Ù„Ø¬Ù†Ø³ÙŠØ© <span class="required">*</span></label>
                                <input type="text" id="nationality" name="nationality" required placeholder="Ø§Ù„Ø¬Ù†Ø³ÙŠØ©">
                            </div>

                            <div class="form-group">
                                <label for="birthPlace">Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ <span class="required">*</span></label>
                                <input type="text" id="birthPlace" name="birthPlace" required placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯">
                            </div>

                            <div class="form-group full-width">
                                <label>ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„ <span class="required">*</span></label>
                                <div class="file-upload" onclick="document.getElementById('childPhoto').click()">
                                    <div class="file-upload-icon">ğŸ“·</div>
                                    <p>Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„</p>
                                    <small>ÙŠÙÙØ¶Ù„ ØµÙˆØ±Ø© ÙˆØ§Ø¶Ø­Ø© ÙˆØ­Ø¯ÙŠØ«Ø©</small>
                                    <input type="file" id="childPhoto" name="childPhoto" accept="image/*" style="display: none;" required>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="navigation" id="navigation">
                    <button type="button" class="btn btn-secondary" id="prevBtn" onclick="prevStep()" disabled>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                </div>
            </form>

            <!-- Footer -->
            <div class="footer">
                <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ø¨Ù€ (*) Ù…Ø·Ù„ÙˆØ¨Ø©</p>
                <p>
                    Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©: +966 53 750 6160 | 
                    <a href="https://www.google.com/maps/dir/?api=1&destination=24.0857962992111%2C38.0875255905884" target="_blank">
                        Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
                    </a>
                </p>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 3; // Ù…Ø¨Ø³Ø· Ù„Ø«Ù„Ø§Ø« Ø®Ø·ÙˆØ§Øª ÙÙ‚Ø·
        let formData = {};

        const stepNames = [
            'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„',
            'Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±', 
            'Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ¥Ø±Ø³Ø§Ù„'
        ];

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const stepIndicator = document.getElementById('stepIndicator');
            const prevBtn = document.getElementById('prevBtn');
            
            const percentage = (currentStep / totalSteps) * 100;
            progressFill.style.width = percentage + '%';
            
            stepIndicator.textContent = `Ø§Ù„Ø®Ø·ÙˆØ© ${currentStep} Ù…Ù† ${totalSteps}: ${stepNames[currentStep - 1]}`;
            
            prevBtn.disabled = currentStep === 1;
        }

        function collectFormData() {
            const form = document.getElementById('registrationForm');
            const formDataObj = new FormData(form);
            
            for (let [key, value] of formDataObj.entries()) {
                formData[key] = value;
            }
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                collectFormData();
                currentStep++;
                updateProgress();
                
                if (currentStep === 2) {
                    showStep2();
                } else if (currentStep === 3) {
                    showStep3();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgress();
                
                if (currentStep === 1) {
                    showStep1();
                } else if (currentStep === 2) {
                    showStep2();
                }
            }
        }

        function showStep1() {
            const formContent = document.getElementById('formContent');
            formContent.innerHTML = `
                <div class="form-section">
                    <h2 class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="childName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø·ÙÙ„ <span class="required">*</span></label>
                            <input type="text" id="childName" name="childName" required placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" value="${formData.childName || ''}">
                        </div>

                        <div class="form-group">
                            <label for="birthDate">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ <span class="required">*</span></label>
                            <input type="date" id="birthDate" name="birthDate" required value="${formData.birthDate || ''}">
                        </div>

                        <div class="form-group">
                            <label for="age">Ø§Ù„Ø¹Ù…Ø± <span class="required">*</span></label>
                            <input type="text" id="age" name="age" required placeholder="Ù…Ø«Ø§Ù„: Ø³Ù†ØªØ§Ù† Ùˆ 6 Ø£Ø´Ù‡Ø±" value="${formData.age || ''}">
                        </div>

                        <div class="form-group">
                            <label>Ø§Ù„Ø¬Ù†Ø³ <span class="required">*</span></label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="gender" value="Ø°ÙƒØ±" required ${formData.gender === 'Ø°ÙƒØ±' ? 'checked' : ''}>
                                    <span>Ø°ÙƒØ±</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="gender" value="Ø£Ù†Ø«Ù‰" required ${formData.gender === 'Ø£Ù†Ø«Ù‰' ? 'checked' : ''}>
                                    <span>Ø£Ù†Ø«Ù‰</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="nationality">Ø§Ù„Ø¬Ù†Ø³ÙŠØ© <span class="required">*</span></label>
                            <input type="text" id="nationality" name="nationality" required placeholder="Ø§Ù„Ø¬Ù†Ø³ÙŠØ©" value="${formData.nationality || ''}">
                        </div>

                        <div class="form-group">
                            <label for="birthPlace">Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ <span class="required">*</span></label>
                            <input type="text" id="birthPlace" name="birthPlace" required placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯" value="${formData.birthPlace || ''}">
                        </div>
                    </div>
                </div>
            `;
            
            updateNavigation();
        }

        function showStep2() {
            const formContent = document.getElementById('formContent');
            formContent.innerHTML = `
                <div class="form-section">
                    <h2 class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="parentName">Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± <span class="required">*</span></label>
                            <input type="text" id="parentName" name="parentName" required placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±" value="${formData.parentName || ''}">
                        </div>

                        <div class="form-group">
                            <label for="relationship">ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø© <span class="required">*</span></label>
                            <select id="relationship" name="relationship" required>
                                <option value="">Ø§Ø®ØªØ± ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø©</option>
                                <option value="Ø§Ù„Ø£Ø¨" ${formData.relationship === 'Ø§Ù„Ø£Ø¨' ? 'selected' : ''}>Ø§Ù„Ø£Ø¨</option>
                                <option value="Ø§Ù„Ø£Ù…" ${formData.relationship === 'Ø§Ù„Ø£Ù…' ? 'selected' : ''}>Ø§Ù„Ø£Ù…</option>
                                <option value="Ø§Ù„Ø¬Ø¯" ${formData.relationship === 'Ø§Ù„Ø¬Ø¯' ? 'selected' : ''}>Ø§Ù„Ø¬Ø¯</option>
                                <option value="Ø§Ù„Ø¬Ø¯Ø©" ${formData.relationship === 'Ø§Ù„Ø¬Ø¯Ø©' ? 'selected' : ''}>Ø§Ù„Ø¬Ø¯Ø©</option>
                                <option value="Ø§Ù„Ø¹Ù…" ${formData.relationship === 'Ø§Ù„Ø¹Ù…' ? 'selected' : ''}>Ø§Ù„Ø¹Ù…</option>
                                <option value="Ø§Ù„Ø¹Ù…Ø©" ${formData.relationship === 'Ø§Ù„Ø¹Ù…Ø©' ? 'selected' : ''}>Ø§Ù„Ø¹Ù…Ø©</option>
                                <option value="Ø§Ù„Ø®Ø§Ù„" ${formData.relationship === 'Ø§Ù„Ø®Ø§Ù„' ? 'selected' : ''}>Ø§Ù„Ø®Ø§Ù„</option>
                                <option value="Ø§Ù„Ø®Ø§Ù„Ø©" ${formData.relationship === 'Ø§Ù„Ø®Ø§Ù„Ø©' ? 'selected' : ''}>Ø§Ù„Ø®Ø§Ù„Ø©</option>
                                <option value="Ø£Ø®Ø±Ù‰" ${formData.relationship === 'Ø£Ø®Ø±Ù‰' ? 'selected' : ''}>Ø£Ø®Ø±Ù‰</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="phoneNumber">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ <span class="required">*</span></label>
                            <input type="tel" id="phoneNumber" name="phoneNumber" required placeholder="+966 53 750 6160" value="${formData.phoneNumber || ''}">
                        </div>

                        <div class="form-group">
                            <label for="emergencyPhone">Ø±Ù‚Ù… Ø¢Ø®Ø± Ù„Ù„Ø·ÙˆØ§Ø±Ø¦ <span class="required">*</span></label>
                            <input type="tel" id="emergencyPhone" name="emergencyPhone" required placeholder="Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ Ø¢Ø®Ø± Ù„Ù„Ø·ÙˆØ§Ø±Ø¦" value="${formData.emergencyPhone || ''}">
                        </div>

                        <div class="form-group">
                            <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ <span class="required">*</span></label>
                            <input type="email" id="email" name="email" required placeholder="example@email.com" value="${formData.email || ''}">
                        </div>

                        <div class="form-group full-width">
                            <label for="address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† <span class="required">*</span></label>
                            <textarea id="address" name="address" rows="3" required placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„">${formData.address || ''}</textarea>
                        </div>
                    </div>
                </div>
            `;
            
            updateNavigation();
        }

        function showStep3() {
            collectFormData();
            
            const formContent = document.getElementById('formContent');
            formContent.innerHTML = `
                <div class="form-section">
                    <h2 class="section-title">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
                    
                    <div class="ticket">
                        <div class="ticket-header">
                            <div class="ticket-number">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: BK-${Date.now().toString().slice(-6)}</div>
                            <p>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…: ${new Date().toLocaleDateString('ar-SA')}</p>
                        </div>
                        
                        <div class="ticket-info">
                            <div class="info-item">
                                <div class="info-label">Ø§Ø³Ù… Ø§Ù„Ø·ÙÙ„</div>
                                <div class="info-value">${formData.childName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</div>
                                <div class="info-value">${formData.birthDate || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø§Ù„Ø¹Ù…Ø±</div>
                                <div class="info-value">${formData.age || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø§Ù„Ø¬Ù†Ø³</div>
                                <div class="info-value">${formData.gender || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</div>
                                <div class="info-value">${formData.parentName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø©</div>
                                <div class="info-value">${formData.relationship || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</div>
                                <div class="info-value">${formData.phoneNumber || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
                                <div class="info-value">${formData.email || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid #e1e5e9;">
                            <p style="text-align: center; color: #666; font-size: 0.9rem;">
                                ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­ØªÙ‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            updateNavigation();
        }

        function updateNavigation() {
            const navigation = document.getElementById('navigation');
            
            if (currentStep === totalSteps) {
                navigation.innerHTML = `
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button type="button" class="btn btn-primary" onclick="submitForm()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
                `;
            } else {
                navigation.innerHTML = `
                    <button type="button" class="btn btn-secondary" id="prevBtn" onclick="prevStep()" ${currentStep === 1 ? 'disabled' : ''}>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                    <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                `;
            }
        }

        function submitForm() {
            collectFormData();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ù… ØªØ³Ø¬ÙŠÙ„ ÙØ±ÙŠØ¯
            const registrationNumber = 'BK-' + Date.now().toString().slice(-6);
            
            // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
            const formContent = document.getElementById('formContent');
            formContent.innerHTML = `
                <div class="success-message">
                    <h2>ğŸ‰ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!</h2>
                    <p>Ø±Ù‚Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„: <strong>${registrationNumber}</strong></p>
                    <p>Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙƒÙ… Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©</p>
                </div>
                
                <div class="ticket">
                    <div class="ticket-header">
                        <div class="ticket-number">${registrationNumber}</div>
                        <p>ÙƒÙˆØ¨ÙˆÙ† ØªØ³Ø¬ÙŠÙ„ Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯</p>
                        <p>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…: ${new Date().toLocaleDateString('ar-SA')}</p>
                    </div>
                    
                    <div class="ticket-info">
                        <div class="info-item">
                            <div class="info-label">Ø§Ø³Ù… Ø§Ù„Ø·ÙÙ„</div>
                            <div class="info-value">${formData.childName}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</div>
                            <div class="info-value">${formData.parentName}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</div>
                            <div class="info-value">${formData.phoneNumber}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</div>
                            <div class="info-value" style="color: #FF6B35; font-weight: bold;">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid #e1e5e9; text-align: center;">
                        <p style="color: #4A90E2; font-weight: 600;">Ù…Ø±ÙƒØ² Bright Kids Ù„Ù„Ø­Ø¶Ø§Ù†Ø©</p>
                        <p style="color: #666; font-size: 0.9rem;">Ø­ÙŠ Ù‚Ø±Ø·Ø¨Ø©ØŒ 46429ØŒ ÙŠÙ†Ø¨Ø¹ | +966 53 750 6160</p>
                        <p style="color: #666; font-size: 0.9rem;">YADC7069</p>
                    </div>
                </div>
            `;
            
            // Ø¥Ø®ÙØ§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
            document.getElementById('navigation').style.display = 'none';
            
            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ÙˆÙ…Ø¤Ø´Ø± Ø§Ù„Ø®Ø·ÙˆØ©
            document.querySelector('.progress-bar').style.display = 'none';
            document.getElementById('stepIndicator').style.display = 'none';
            
            // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…
            console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„:', {
                registrationNumber,
                formData,
                timestamp: new Date().toISOString()
            });
        }

        // File upload handling
        document.addEventListener('change', function(e) {
            if (e.target.type === 'file') {
                const file = e.target.files[0];
                if (file) {
                    const fileUpload = e.target.parentElement;
                    fileUpload.innerHTML = `
                        <div class="file-upload-icon">âœ…</div>
                        <p>ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù: ${file.name}</p>
                        <small>Ø§Ø¶ØºØ· Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù„Ù</small>
                        <input type="file" id="${e.target.id}" name="${e.target.name}" accept="${e.target.accept}" style="display: none;" required>
                    `;
                    fileUpload.style.borderColor = '#6BCF7F';
                    fileUpload.style.background = 'rgba(108, 207, 127, 0.1)';
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø¨Ø· Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø±
                    fileUpload.onclick = function() {
                        document.getElementById(e.target.id).click();
                    };
                }
            }
        });

        // Initialize
        updateProgress();
    </script>
</body>
</html>


import React, { useState, useEffect } from 'react';

const RegistrationRequests = () => {
  const [registrations, setRegistrations] = useState([]);
  const [loading, setLoading] = useState(true);
  const [stats, setStats] = useState({});
  const [selectedRegistration, setSelectedRegistration] = useState(null);
  const [showModal, setShowModal] = useState(false);

  useEffect(() => {
    fetchRegistrations();
    fetchStats();
  }, []);

  const fetchRegistrations = async () => {
    try {
      const response = await fetch('http://localhost:5000/api/registration/list');
      const data = await response.json();
      if (data.success) {
        setRegistrations(data.registrations);
      }
    } catch (error) {
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„:', error);
    } finally {
      setLoading(false);
    }
  };

  const fetchStats = async () => {
    try {
      const response = await fetch('http://localhost:5000/api/registration/stats');
      const data = await response.json();
      if (data.success) {
        setStats(data.stats);
      }
    } catch (error) {
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:', error);
    }
  };

  const updateRegistrationStatus = async (registrationNumber, newStatus, notes = '') => {
    try {
      const response = await fetch(`http://localhost:5000/api/registration/${registrationNumber}/status`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          status: newStatus,
          notes: notes
        })
      });
      
      const data = await response.json();
      if (data.success) {
        fetchRegistrations();
        fetchStats();
        setShowModal(false);
        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
      } else {
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©');
      }
    } catch (error) {
      console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©:', error);
      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©');
    }
  };

  const getStatusBadge = (status) => {
    const statusConfig = {
      'pending_review': { label: 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©', color: 'bg-yellow-100 text-yellow-800' },
      'approved': { label: 'Ù…Ù‚Ø¨ÙˆÙ„', color: 'bg-green-100 text-green-800' },
      'rejected': { label: 'Ù…Ø±ÙÙˆØ¶', color: 'bg-red-100 text-red-800' },
      'contacted': { label: 'ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„', color: 'bg-blue-100 text-blue-800' }
    };
    
    const config = statusConfig[status] || { label: status, color: 'bg-gray-100 text-gray-800' };
    
    return (
      <span className={`px-2 py-1 rounded-full text-xs font-medium ${config.color}`}>
        {config.label}
      </span>
    );
  };

  const formatDate = (dateString) => {
    return new Date(dateString).toLocaleDateString('ar-SA', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  if (loading) {
    return (
      <div className="flex justify-center items-center h-64">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <div className="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                <span className="text-blue-600 font-bold">ğŸ“‹</span>
              </div>
            </div>
            <div className="mr-4">
              <p className="text-sm font-medium text-gray-600">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</p>
              <p className="text-2xl font-bold text-gray-900">{stats.total || 0}</p>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <div className="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center">
                <span className="text-yellow-600 font-bold">â³</span>
              </div>
            </div>
            <div className="mr-4">
              <p className="text-sm font-medium text-gray-600">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</p>
              <p className="text-2xl font-bold text-gray-900">{stats.pending || 0}</p>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <div className="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                <span className="text-green-600 font-bold">âœ…</span>
              </div>
            </div>
            <div className="mr-4">
              <p className="text-sm font-medium text-gray-600">Ù…Ù‚Ø¨ÙˆÙ„Ø©</p>
              <p className="text-2xl font-bold text-gray-900">{stats.approved || 0}</p>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <div className="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center">
                <span className="text-orange-600 font-bold">ğŸ“…</span>
              </div>
            </div>
            <div className="mr-4">
              <p className="text-sm font-medium text-gray-600">Ø§Ù„ÙŠÙˆÙ…</p>
              <p className="text-2xl font-bold text-gray-900">{stats.today || 0}</p>
            </div>
          </div>
        </div>
      </div>

      {/* Ù‚Ø§Ø¦Ù…Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */}
      <div className="bg-white shadow rounded-lg">
        <div className="px-6 py-4 border-b border-gray-200">
          <h3 className="text-lg font-medium text-gray-900">Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h3>
        </div>
        
        <div className="overflow-x-auto">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gray-50">
              <tr>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                  Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                  Ø§Ø³Ù… Ø§Ù„Ø·ÙÙ„
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                  Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                  Ø§Ù„Ø­Ø§Ù„Ø©
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                  Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
                </th>
              </tr>
            </thead>
            <tbody className="bg-white divide-y divide-gray-200">
              {registrations.map((registration) => (
                <tr key={registration.registration_number} className="hover:bg-gray-50">
                  <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                    {registration.registration_number}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {registration.child_data?.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {registration.parent_data?.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {registration.parent_data?.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    {formatDate(registration.submission_date)}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    {getStatusBadge(registration.status)}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                    <button
                      onClick={() => {
                        setSelectedRegistration(registration);
                        setShowModal(true);
                      }}
                      className="text-blue-600 hover:text-blue-900 ml-4"
                    >
                      Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                    </button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
          
          {registrations.length === 0 && (
            <div className="text-center py-12">
              <div className="text-gray-500">
                <p className="text-lg font-medium">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ØªØ³Ø¬ÙŠÙ„</p>
                <p className="text-sm">Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù‡Ù†Ø§</p>
              </div>
            </div>
          )}
        </div>
      </div>

      {/* Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ */}
      {showModal && selectedRegistration && (
        <div className="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
          <div className="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white">
            <div className="mt-3">
              <div className="flex justify-between items-center mb-4">
                <h3 className="text-lg font-medium text-gray-900">
                  ØªÙØ§ØµÙŠÙ„ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ - {selectedRegistration.registration_number}
                </h3>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600"
                >
                  âœ•
                </button>
              </div>
              
              <div className="space-y-6">
                {/* Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„ */}
                <div>
                  <h4 className="text-md font-medium text-gray-900 mb-3">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„</h4>
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700">Ø§Ù„Ø§Ø³Ù…</label>
                      <p className="mt-1 text-sm text-gray-900">{selectedRegistration.child_data?.name}</p>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label>
                      <p className="mt-1 text-sm text-gray-900">{selectedRegistration.child_data?.birth_date}</p>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700">Ø§Ù„Ø¹Ù…Ø±</label>
                      <p className="mt-1 text-sm text-gray-900">{selectedRegistration.child_data?.age}</p>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700">Ø§Ù„Ø¬Ù†Ø³</label>
                      <p className="mt-1 text-sm text-gray-900">{selectedRegistration.child_data?.gender}</p>
                    </div>
                  </div>
                </div>

                {/* Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± */}
                <div>
                  <h4 className="text-md font-medium text-gray-900 mb-3">Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</h4>
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700">Ø§Ù„Ø§Ø³Ù…</label>
                      <p className="mt-1 text-sm text-gray-900">{selectedRegistration.parent_data?.name}</p>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700">ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø©</label>
                      <p className="mt-1 text-sm text-gray-900">{selectedRegistration.parent_data?.relationship}</p>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
                      <p className="mt-1 text-sm text-gray-900">{selectedRegistration.parent_data?.phone}</p>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                      <p className="mt-1 text-sm text-gray-900">{selectedRegistration.parent_data?.email}</p>
                    </div>
                    <div className="col-span-2">
                      <label className="block text-sm font-medium text-gray-700">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                      <p className="mt-1 text-sm text-gray-900">{selectedRegistration.parent_data?.address}</p>
                    </div>
                  </div>
                </div>

                {/* Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */}
                <div className="flex justify-end space-x-3 pt-4 border-t">
                  <button
                    onClick={() => updateRegistrationStatus(selectedRegistration.registration_number, 'rejected')}
                    className="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"
                  >
                    Ø±ÙØ¶
                  </button>
                  <button
                    onClick={() => updateRegistrationStatus(selectedRegistration.registration_number, 'contacted')}
                    className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
                  >
                    ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„
                  </button>
                  <button
                    onClick={() => updateRegistrationStatus(selectedRegistration.registration_number, 'approved')}
                    className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"
                  >
                    Ù‚Ø¨ÙˆÙ„
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default RegistrationRequests;


import React, { useState } from 'react';
// import brightKidsLogo from '../assets/bright-kids-logo-white.png';
import './RegistrationForm.css';

const RegistrationForm = () => {
  const [currentStep, setCurrentStep] = useState(1);
  const [formData, setFormData] = useState({
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„
    childName: '',
    birthDate: '',
    age: '',
    gender: '',
    nationality: '',
    birthPlace: '',
    childPhoto: null,
    
    // Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±
    parentName: '',
    relationship: '',
    phoneNumber: '',
    emergencyPhone: '',
    email: '',
    address: '',
    
    // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØºØ°ÙŠØ©
    feedingCount: '',
    feedingTimes: '',
    milkType: '',
    milkBrand: '',
    breakfast: '',
    lunch: '',
    dinner: '',
    snacks: '',
    
    // Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµØ­ÙŠØ©
    hasAllergies: false,
    allergiesDetails: '',
    medications: '',
    emergencyInstructions: '',
    
    // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
    transportService: false,
    mealService: false,
    
    // ØªÙÙˆÙŠØ¶ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
    authorizedPersons: [
      { name: '', relationship: '', phone: '' },
      { name: '', relationship: '', phone: '' },
      { name: '', relationship: '', phone: '' }
    ],
    
    // Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
    documents: {
      familyCard: null,
      childPhotos: null,
      birthCertificate: null,
      vaccinations: null,
      parentId: null
    }
  });

  const totalSteps = 8;

  const handleInputChange = (field, value) => {
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
  };

  const handleAuthorizedPersonChange = (index, field, value) => {
    const updatedPersons = [...formData.authorizedPersons];
    updatedPersons[index][field] = value;
    setFormData(prev => ({
      ...prev,
      authorizedPersons: updatedPersons
    }));
  };

  const handleFileUpload = (field, file) => {
    if (field.includes('.')) {
      const [parent, child] = field.split('.');
      setFormData(prev => ({
        ...prev,
        [parent]: {
          ...prev[parent],
          [child]: file
        }
      }));
    } else {
      setFormData(prev => ({
        ...prev,
        [field]: file
      }));
    }
  };

  const nextStep = () => {
    if (currentStep < totalSteps) {
      setCurrentStep(currentStep + 1);
    }
  };

  const prevStep = () => {
    if (currentStep > 1) {
      setCurrentStep(currentStep - 1);
    }
  };

  const handleSubmit = () => {
    console.log('Form submitted:', formData);
    // Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…
    alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!');
  };

  const renderProgressBar = () => (
    <div className="w-full bg-gray-200 rounded-full h-3 mb-8">
      <div 
        className="bg-gradient-to-r from-bright-orange to-bright-blue h-3 rounded-full progress-bar"
        style={{ width: `${(currentStep / totalSteps) * 100}%` }}
      ></div>
    </div>
  );

  const renderStep1 = () => (
    <div className="form-step">
      <h2 className="text-2xl font-bold text-bright-blue mb-6">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„</h2>
      
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø·ÙÙ„ *
          </label>
          <input
            type="text"
            value={formData.childName}
            onChange={(e) => handleInputChange('childName', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"
            required
          />
        </div>

        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ *
          </label>
          <input
            type="date"
            value={formData.birthDate}
            onChange={(e) => handleInputChange('birthDate', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            required
          />
        </div>

        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ø§Ù„Ø¹Ù…Ø± *
          </label>
          <input
            type="text"
            value={formData.age}
            onChange={(e) => handleInputChange('age', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            placeholder="Ù…Ø«Ø§Ù„: Ø³Ù†ØªØ§Ù† Ùˆ 6 Ø£Ø´Ù‡Ø±"
            required
          />
        </div>

        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ø§Ù„Ø¬Ù†Ø³ *
          </label>
          <div className="flex gap-4">
            <label className="flex items-center">
              <input
                type="radio"
                name="gender"
                value="Ø°ÙƒØ±"
                checked={formData.gender === 'Ø°ÙƒØ±'}
                onChange={(e) => handleInputChange('gender', e.target.value)}
                className="ml-2"
              />
              Ø°ÙƒØ±
            </label>
            <label className="flex items-center">
              <input
                type="radio"
                name="gender"
                value="Ø£Ù†Ø«Ù‰"
                checked={formData.gender === 'Ø£Ù†Ø«Ù‰'}
                onChange={(e) => handleInputChange('gender', e.target.value)}
                className="ml-2"
              />
              Ø£Ù†Ø«Ù‰
            </label>
          </div>
        </div>

        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ø§Ù„Ø¬Ù†Ø³ÙŠØ© *
          </label>
          <input
            type="text"
            value={formData.nationality}
            onChange={(e) => handleInputChange('nationality', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            placeholder="Ø§Ù„Ø¬Ù†Ø³ÙŠØ©"
            required
          />
        </div>

        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ *
          </label>
          <input
            type="text"
            value={formData.birthPlace}
            onChange={(e) => handleInputChange('birthPlace', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯"
            required
          />
        </div>
      </div>

      <div className="mt-6">
        <label className="block text-gray-700 text-sm font-bold mb-2">
          ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„ *
        </label>
        <div className="file-upload-area border-2 border-dashed border-bright-blue rounded-lg p-6 text-center">
          <input
            type="file"
            accept="image/*"
            onChange={(e) => handleFileUpload('childPhoto', e.target.files[0])}
            className="hidden"
            id="childPhoto"
          />
          <label htmlFor="childPhoto" className="cursor-pointer">
            <div className="text-bright-blue text-lg mb-2">ğŸ“·</div>
            <p className="text-gray-600">Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„</p>
            {formData.childPhoto && (
              <p className="text-green-600 mt-2">ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©: {formData.childPhoto.name}</p>
            )}
          </label>
        </div>
      </div>
    </div>
  );

  const renderStep2 = () => (
    <div className="form-step">
      <h2 className="text-2xl font-bold text-bright-blue mb-6">Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</h2>
      
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± *
          </label>
          <input
            type="text"
            value={formData.parentName}
            onChange={(e) => handleInputChange('parentName', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"
            required
          />
        </div>

        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø© *
          </label>
          <select
            value={formData.relationship}
            onChange={(e) => handleInputChange('relationship', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            required
          >
            <option value="">Ø§Ø®ØªØ± ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø©</option>
            <option value="Ø§Ù„Ø£Ø¨">Ø§Ù„Ø£Ø¨</option>
            <option value="Ø§Ù„Ø£Ù…">Ø§Ù„Ø£Ù…</option>
            <option value="Ø§Ù„Ø¬Ø¯">Ø§Ù„Ø¬Ø¯</option>
            <option value="Ø§Ù„Ø¬Ø¯Ø©">Ø§Ù„Ø¬Ø¯Ø©</option>
            <option value="Ø§Ù„Ø¹Ù…">Ø§Ù„Ø¹Ù…</option>
            <option value="Ø§Ù„Ø¹Ù…Ø©">Ø§Ù„Ø¹Ù…Ø©</option>
            <option value="Ø§Ù„Ø®Ø§Ù„">Ø§Ù„Ø®Ø§Ù„</option>
            <option value="Ø§Ù„Ø®Ø§Ù„Ø©">Ø§Ù„Ø®Ø§Ù„Ø©</option>
            <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
          </select>
        </div>

        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ *
          </label>
          <input
            type="tel"
            value={formData.phoneNumber}
            onChange={(e) => handleInputChange('phoneNumber', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            placeholder="+966 53 750 6160"
            required
          />
        </div>

        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ø±Ù‚Ù… Ø¢Ø®Ø± Ù„Ù„Ø·ÙˆØ§Ø±Ø¦ *
          </label>
          <input
            type="tel"
            value={formData.emergencyPhone}
            onChange={(e) => handleInputChange('emergencyPhone', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            placeholder="Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ Ø¢Ø®Ø± Ù„Ù„Ø·ÙˆØ§Ø±Ø¦"
            required
          />
        </div>

        <div>
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *
          </label>
          <input
            type="email"
            value={formData.email}
            onChange={(e) => handleInputChange('email', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            placeholder="example@email.com"
            required
          />
        </div>

        <div className="md:col-span-2">
          <label className="block text-gray-700 text-sm font-bold mb-2">
            Ø§Ù„Ø¹Ù†ÙˆØ§Ù† *
          </label>
          <textarea
            value={formData.address}
            onChange={(e) => handleInputChange('address', e.target.value)}
            className="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-bright-blue"
            placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„"
            rows="3"
            required
          />
        </div>
      </div>
    </div>
  );

  const renderNavigationButtons = () => (
    <div className="flex justify-between mt-8">
      <button
        onClick={prevStep}
        disabled={currentStep === 1}
        className={`px-6 py-3 rounded-lg font-semibold ${
          currentStep === 1
            ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
            : 'btn-secondary text-white hover:shadow-lg'
        }`}
      >
        Ø§Ù„Ø³Ø§Ø¨Ù‚
      </button>

      {currentStep === totalSteps ? (
        <button
          onClick={handleSubmit}
          className="btn-primary text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg"
        >
          Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
        </button>
      ) : (
        <button
          onClick={nextStep}
          className="btn-primary text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg"
        >
          Ø§Ù„ØªØ§Ù„ÙŠ
        </button>
      )}
    </div>
  );

  const renderCurrentStep = () => {
    switch (currentStep) {
      case 1:
        return renderStep1();
      case 2:
        return renderStep2();
      default:
        return renderStep1();
    }
  };

  return (
    <div className="min-h-screen py-8 px-4">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="text-center mb-8">
          <div className="mx-auto mb-4 h-24 w-24 bg-gradient-to-r from-bright-orange to-bright-blue rounded-full flex items-center justify-center">
            <span className="text-white text-2xl font-bold">BK</span>
          </div>
          <h1 className="text-3xl font-bold text-bright-blue mb-2">
            Ø§Ø³ØªÙ…Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯
          </h1>
          <p className="text-gray-600">
            Ù…Ø±ÙƒØ² Bright Kids Ù„Ù„Ø­Ø¶Ø§Ù†Ø© - YADC7069
          </p>
          <p className="text-gray-600">
            Ø­ÙŠ Ù‚Ø±Ø·Ø¨Ø©ØŒ 46429ØŒ ÙŠÙ†Ø¨Ø¹ | +966 53 750 6160
          </p>
        </div>

        {/* Progress Bar */}
        {renderProgressBar()}

        {/* Step Indicator */}
        <div className="flex justify-center mb-8">
          <div className="text-center">
            <span className="text-lg font-semibold text-bright-blue">
              Ø§Ù„Ø®Ø·ÙˆØ© {currentStep} Ù…Ù† {totalSteps}
            </span>
          </div>
        </div>

        {/* Form Content */}
        <div className="card rounded-xl shadow-xl p-8 mb-8">
          {renderCurrentStep()}
          {renderNavigationButtons()}
        </div>

        {/* Footer */}
        <div className="text-center text-gray-500 text-sm">
          <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ø¨Ù€ (*) Ù…Ø·Ù„ÙˆØ¨Ø©</p>
          <p className="mt-2">
            Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©: +966 53 750 6160 | 
            <a 
              href="https://www.google.com/maps/dir/?api=1&destination=24.0857962992111%2C38.0875255905884"
              target="_blank"
              rel="noopener noreferrer"
              className="text-bright-blue hover:underline mr-2"
            >
              Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
            </a>
          </p>
        </div>
      </div>
    </div>
  );
};

export default RegistrationForm;


from flask import Blueprint, request, jsonify, current_app
from src.models.user import db, User, Child, DailyUpdate
from src.routes.auth import token_required, admin_required
from datetime import datetime, date
from sqlalchemy import and_, func

daily_updates_bp = Blueprint('daily_updates', __name__)

@daily_updates_bp.route('/add', methods=['POST'])
@token_required
def add_daily_update(current_user):
    """Ø¥Ø¶Ø§ÙØ© ØªØ­Ø¯ÙŠØ« ÙŠÙˆÙ…ÙŠ (Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙ‚Ø·)"""
    try:
        if current_user.role not in ['staff', 'admin']:
            return jsonify({'message': 'Only staff can add daily updates'}), 403
        
        data = request.get_json()
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        if not data.get('child_id'):
            return jsonify({'message': 'Child ID is required'}), 400
        
        child = Child.query.get(data['child_id'])
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        if not child.is_approved:
            return jsonify({'message': 'Child is not approved yet'}), 400
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙŠÙˆÙ…ÙŠ
        daily_update = DailyUpdate(
            child_id=data['child_id'],
            staff_id=current_user.id,
            note=data.get('note'),
            photo_url=data.get('photo_url'),
            video_url=data.get('video_url'),
            activity_type=data.get('activity_type')  # Ø£ÙƒÙ„ØŒ Ù†ÙˆÙ…ØŒ Ù„Ø¹Ø¨ØŒ ØªØ¹Ù„Ù…
        )
        
        db.session.add(daily_update)
        db.session.commit()
        
        # Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± (TODO: ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª)
        
        return jsonify({
            'message': 'Daily update added successfully',
            'update': daily_update.to_dict(),
            'child': child.to_dict()
        }), 201
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Failed to add daily update: {str(e)}'}), 500

@daily_updates_bp.route('/child/<int:child_id>/today', methods=['GET'])
@token_required
def get_child_updates_today(current_user, child_id):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø·ÙÙ„ Ù…Ø­Ø¯Ø¯ Ù„Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ"""
    try:
        child = Child.query.get(child_id)
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        if current_user.role == 'parent' and child.parent_id != current_user.id:
            return jsonify({'message': 'Access denied'}), 403
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙŠÙˆÙ…
        today = date.today()
        updates = DailyUpdate.query.filter(
            and_(
                DailyUpdate.child_id == child_id,
                func.date(DailyUpdate.created_at) == today
            )
        ).order_by(DailyUpdate.created_at.desc()).all()
        
        # Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù Ù„ÙƒÙ„ ØªØ­Ø¯ÙŠØ«
        updates_with_staff = []
        for update in updates:
            update_dict = update.to_dict()
            update_dict['staff'] = update.staff_member.to_dict()
            updates_with_staff.append(update_dict)
        
        return jsonify({
            'child': child.to_dict(),
            'date': today.isoformat(),
            'updates': updates_with_staff
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get daily updates: {str(e)}'}), 500

@daily_updates_bp.route('/child/<int:child_id>/history', methods=['GET'])
@token_required
def get_child_updates_history(current_user, child_id):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® ØªØ­Ø¯ÙŠØ«Ø§Øª Ø·ÙÙ„ Ù…Ø­Ø¯Ø¯"""
    try:
        child = Child.query.get(child_id)
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        if current_user.role == 'parent' and child.parent_id != current_user.id:
            return jsonify({'message': 'Access denied'}), 403
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
        days = request.args.get('days', 7, type=int)  # Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù… Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
        activity_type = request.args.get('activity_type')  # ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù†Ø´Ø§Ø·
        
        # Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
        query = DailyUpdate.query.filter_by(child_id=child_id)
        
        if activity_type:
            query = query.filter_by(activity_type=activity_type)
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª
        updates = query.order_by(DailyUpdate.created_at.desc())\
            .limit(days * 10).all()  # ØªÙ‚Ø¯ÙŠØ± 10 ØªØ­Ø¯ÙŠØ«Ø§Øª ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰ ÙÙŠ Ø§Ù„ÙŠÙˆÙ…
        
        # ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
        daily_updates = {}
        
        for update in updates:
            update_date = update.created_at.date().isoformat()
            
            if update_date not in daily_updates:
                daily_updates[update_date] = {
                    'date': update_date,
                    'updates': []
                }
            
            update_dict = update.to_dict()
            update_dict['staff'] = update.staff_member.to_dict()
            daily_updates[update_date]['updates'].append(update_dict)
        
        # ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
        sorted_updates = sorted(daily_updates.values(), 
                              key=lambda x: x['date'], reverse=True)
        
        return jsonify({
            'child': child.to_dict(),
            'updates_history': sorted_updates
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get updates history: {str(e)}'}), 500

@daily_updates_bp.route('/my-children/today', methods=['GET'])
@token_required
def get_my_children_updates_today(current_user):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¬Ù…ÙŠØ¹ Ø£Ø·ÙØ§Ù„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ù„Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ"""
    try:
        if current_user.role != 'parent':
            return jsonify({'message': 'Only parents can view their children updates'}), 403
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø·ÙØ§Ù„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±
        children = Child.query.filter_by(
            parent_id=current_user.id, 
            is_approved=True, 
            is_active=True
        ).all()
        
        today = date.today()
        children_updates = []
        
        for child in children:
            # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ù„Ù‡Ø°Ø§ Ø§Ù„Ø·ÙÙ„
            updates = DailyUpdate.query.filter(
                and_(
                    DailyUpdate.child_id == child.id,
                    func.date(DailyUpdate.created_at) == today
                )
            ).order_by(DailyUpdate.created_at.desc()).all()
            
            # Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù Ù„ÙƒÙ„ ØªØ­Ø¯ÙŠØ«
            updates_with_staff = []
            for update in updates:
                update_dict = update.to_dict()
                update_dict['staff'] = update.staff_member.to_dict()
                updates_with_staff.append(update_dict)
            
            children_updates.append({
                'child': child.to_dict(),
                'updates': updates_with_staff,
                'updates_count': len(updates_with_staff)
            })
        
        return jsonify({
            'date': today.isoformat(),
            'children_updates': children_updates
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get children updates: {str(e)}'}), 500

@daily_updates_bp.route('/today', methods=['GET'])
@token_required
def get_all_updates_today(current_user):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø©)"""
    try:
        if current_user.role not in ['staff', 'admin']:
            return jsonify({'message': 'Access denied'}), 403
        
        today = date.today()
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙŠÙˆÙ…
        updates = DailyUpdate.query.filter(
            func.date(DailyUpdate.created_at) == today
        ).order_by(DailyUpdate.created_at.desc()).all()
        
        # Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·ÙÙ„ ÙˆØ§Ù„Ù…ÙˆØ¸Ù Ù„ÙƒÙ„ ØªØ­Ø¯ÙŠØ«
        updates_with_details = []
        for update in updates:
            update_dict = update.to_dict()
            update_dict['child'] = update.child.to_dict()
            update_dict['staff'] = update.staff_member.to_dict()
            updates_with_details.append(update_dict)
        
        # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©
        total_updates = len(updates_with_details)
        activity_types = {}
        
        for update in updates_with_details:
            activity_type = update.get('activity_type', 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')
            activity_types[activity_type] = activity_types.get(activity_type, 0) + 1
        
        return jsonify({
            'date': today.isoformat(),
            'summary': {
                'total_updates': total_updates,
                'activity_breakdown': activity_types
            },
            'updates': updates_with_details
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get today updates: {str(e)}'}), 500

@daily_updates_bp.route('/<int:update_id>', methods=['PUT'])
@token_required
def update_daily_update(current_user, update_id):
    """ØªØ­Ø¯ÙŠØ« ØªØ­Ø¯ÙŠØ« ÙŠÙˆÙ…ÙŠ (Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø°ÙŠ Ø£Ù†Ø´Ø£Ù‡ Ø£Ùˆ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙ‚Ø·)"""
    try:
        daily_update = DailyUpdate.query.get(update_id)
        
        if not daily_update:
            return jsonify({'message': 'Update not found'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        if current_user.role == 'staff' and daily_update.staff_id != current_user.id:
            return jsonify({'message': 'You can only edit your own updates'}), 403
        elif current_user.role not in ['staff', 'admin']:
            return jsonify({'message': 'Access denied'}), 403
        
        data = request.get_json()
        
        # ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©
        if data.get('note') is not None:
            daily_update.note = data['note']
        if data.get('photo_url') is not None:
            daily_update.photo_url = data['photo_url']
        if data.get('video_url') is not None:
            daily_update.video_url = data['video_url']
        if data.get('activity_type') is not None:
            daily_update.activity_type = data['activity_type']
        
        db.session.commit()
        
        return jsonify({
            'message': 'Daily update updated successfully',
            'update': daily_update.to_dict()
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Failed to update daily update: {str(e)}'}), 500

@daily_updates_bp.route('/<int:update_id>', methods=['DELETE'])
@token_required
def delete_daily_update(current_user, update_id):
    """Ø­Ø°Ù ØªØ­Ø¯ÙŠØ« ÙŠÙˆÙ…ÙŠ (Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø°ÙŠ Ø£Ù†Ø´Ø£Ù‡ Ø£Ùˆ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙ‚Ø·)"""
    try:
        daily_update = DailyUpdate.query.get(update_id)
        
        if not daily_update:
            return jsonify({'message': 'Update not found'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        if current_user.role == 'staff' and daily_update.staff_id != current_user.id:
            return jsonify({'message': 'You can only delete your own updates'}), 403
        elif current_user.role not in ['staff', 'admin']:
            return jsonify({'message': 'Access denied'}), 403
        
        db.session.delete(daily_update)
        db.session.commit()
        
        return jsonify({
            'message': 'Daily update deleted successfully'
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Failed to delete daily update: {str(e)}'}), 500

@daily_updates_bp.route('/activity-types', methods=['GET'])
@token_required
def get_activity_types(current_user):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©"""
    activity_types = [
        {'value': 'Ø£ÙƒÙ„', 'label': 'ÙˆØ¬Ø¨Ø© Ø·Ø¹Ø§Ù…', 'icon': 'ğŸ½ï¸'},
        {'value': 'Ù†ÙˆÙ…', 'label': 'ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ…', 'icon': 'ğŸ˜´'},
        {'value': 'Ù„Ø¹Ø¨', 'label': 'ÙˆÙ‚Øª Ø§Ù„Ù„Ø¹Ø¨', 'icon': 'ğŸ®'},
        {'value': 'ØªØ¹Ù„Ù…', 'label': 'Ù†Ø´Ø§Ø· ØªØ¹Ù„ÙŠÙ…ÙŠ', 'icon': 'ğŸ“š'},
        {'value': 'Ø±ÙŠØ§Ø¶Ø©', 'label': 'Ù†Ø´Ø§Ø· Ø±ÙŠØ§Ø¶ÙŠ', 'icon': 'âš½'},
        {'value': 'ÙÙ†', 'label': 'Ù†Ø´Ø§Ø· ÙÙ†ÙŠ', 'icon': 'ğŸ¨'},
        {'value': 'Ù…ÙˆØ³ÙŠÙ‚Ù‰', 'label': 'Ù†Ø´Ø§Ø· Ù…ÙˆØ³ÙŠÙ‚ÙŠ', 'icon': 'ğŸµ'},
        {'value': 'Ø·Ø¨ÙŠ', 'label': 'Ø±Ø¹Ø§ÙŠØ© Ø·Ø¨ÙŠØ©', 'icon': 'ğŸ¥'},
        {'value': 'Ø£Ø®Ø±Ù‰', 'label': 'Ø£Ù†Ø´Ø·Ø© Ø£Ø®Ø±Ù‰', 'icon': 'ğŸ“'}
    ]
    
    return jsonify({
        'activity_types': activity_types
    }), 200


from flask import Blueprint, request, jsonify
from datetime import datetime
import uuid
import os
from werkzeug.utils import secure_filename

registration_bp = Blueprint('registration', __name__)

# Ù…Ø¬Ù„Ø¯ Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
UPLOAD_FOLDER = 'uploads/registrations'
ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif', 'pdf', 'doc', 'docx'}

def allowed_file(filename):
    return '.' in filename and \
           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

def ensure_upload_folder():
    """Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø±ÙØ¹"""
    if not os.path.exists(UPLOAD_FOLDER):
        os.makedirs(UPLOAD_FOLDER)

@registration_bp.route('/api/registration/submit', methods=['POST'])
def submit_registration():
    """Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯"""
    try:
        ensure_upload_folder()
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ù… ØªØ³Ø¬ÙŠÙ„ ÙØ±ÙŠØ¯
        registration_number = f"BK-{str(uuid.uuid4())[:6].upper()}"
        
        # Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        data = {}
        
        # Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„
        data['child_name'] = request.form.get('childName', '')
        data['birth_date'] = request.form.get('birthDate', '')
        data['age'] = request.form.get('age', '')
        data['gender'] = request.form.get('gender', '')
        data['nationality'] = request.form.get('nationality', '')
        data['birth_place'] = request.form.get('birthPlace', '')
        
        # Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±
        data['parent_name'] = request.form.get('parentName', '')
        data['relationship'] = request.form.get('relationship', '')
        data['phone_number'] = request.form.get('phoneNumber', '')
        data['emergency_phone'] = request.form.get('emergencyPhone', '')
        data['email'] = request.form.get('email', '')
        data['address'] = request.form.get('address', '')
        
        # Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
        uploaded_files = []
        for file_key in request.files:
            file = request.files[file_key]
            if file and file.filename != '' and allowed_file(file.filename):
                filename = secure_filename(file.filename)
                # Ø¥Ø¶Ø§ÙØ© timestamp Ù„ØªØ¬Ù†Ø¨ ØªØ¶Ø§Ø±Ø¨ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
                timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
                filename = f"{registration_number}_{timestamp}_{filename}"
                file_path = os.path.join(UPLOAD_FOLDER, filename)
                file.save(file_path)
                uploaded_files.append({
                    'original_name': file.filename,
                    'saved_name': filename,
                    'file_path': file_path,
                    'file_type': file_key
                })
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        registration_record = {
            'registration_number': registration_number,
            'submission_date': datetime.now().isoformat(),
            'status': 'pending_review',  # Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
            'child_data': {
                'name': data['child_name'],
                'birth_date': data['birth_date'],
                'age': data['age'],
                'gender': data['gender'],
                'nationality': data['nationality'],
                'birth_place': data['birth_place']
            },
            'parent_data': {
                'name': data['parent_name'],
                'relationship': data['relationship'],
                'phone': data['phone_number'],
                'emergency_phone': data['emergency_phone'],
                'email': data['email'],
                'address': data['address']
            },
            'uploaded_files': uploaded_files,
            'created_at': datetime.now().isoformat(),
            'updated_at': datetime.now().isoformat()
        }
        
        # Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„ ÙÙŠ Ù…Ù„Ù JSON Ù…Ø¤Ù‚Øª (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø§Ø­Ù‚Ø§Ù‹)
        import json
        registrations_file = 'data/registrations.json'
        
        # Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if not os.path.exists('data'):
            os.makedirs('data')
        
        # Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©
        registrations = []
        if os.path.exists(registrations_file):
            try:
                with open(registrations_file, 'r', encoding='utf-8') as f:
                    registrations = json.load(f)
            except:
                registrations = []
        
        # Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        registrations.append(registration_record)
        
        # Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
        with open(registrations_file, 'w', encoding='utf-8') as f:
            json.dump(registrations, f, ensure_ascii=False, indent=2)
        
        # Ø¥Ø±Ø³Ø§Ù„ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
        return jsonify({
            'success': True,
            'message': 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­',
            'registration_number': registration_number,
            'status': 'pending_review',
            'submission_date': registration_record['submission_date'],
            'ticket_data': {
                'registration_number': registration_number,
                'child_name': data['child_name'],
                'parent_name': data['parent_name'],
                'phone': data['phone_number'],
                'email': data['email'],
                'submission_date': datetime.now().strftime('%Y-%m-%d'),
                'status': 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©',
                'nursery_info': {
                    'name': 'Ù…Ø±ÙƒØ² Bright Kids Ù„Ù„Ø­Ø¶Ø§Ù†Ø©',
                    'license': 'YADC7069',
                    'address': 'Ø­ÙŠ Ù‚Ø±Ø·Ø¨Ø©ØŒ 46429ØŒ ÙŠÙ†Ø¨Ø¹',
                    'phone': '+966 53 750 6160'
                }
            }
        }), 200
        
    except Exception as e:
        return jsonify({
            'success': False,
            'message': f'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨: {str(e)}'
        }), 500

@registration_bp.route('/api/registration/list', methods=['GET'])
def list_registrations():
    """Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„"""
    try:
        import json
        registrations_file = 'data/registrations.json'
        
        if not os.path.exists(registrations_file):
            return jsonify({
                'success': True,
                'registrations': [],
                'total': 0
            })
        
        with open(registrations_file, 'r', encoding='utf-8') as f:
            registrations = json.load(f)
        
        # ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… (Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹)
        registrations.sort(key=lambda x: x['submission_date'], reverse=True)
        
        return jsonify({
            'success': True,
            'registrations': registrations,
            'total': len(registrations)
        })
        
    except Exception as e:
        return jsonify({
            'success': False,
            'message': f'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: {str(e)}'
        }), 500

@registration_bp.route('/api/registration/<registration_number>', methods=['GET'])
def get_registration(registration_number):
    """Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ù…Ø­Ø¯Ø¯"""
    try:
        import json
        registrations_file = 'data/registrations.json'
        
        if not os.path.exists(registrations_file):
            return jsonify({
                'success': False,
                'message': 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨'
            }), 404
        
        with open(registrations_file, 'r', encoding='utf-8') as f:
            registrations = json.load(f)
        
        # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨
        registration = None
        for reg in registrations:
            if reg['registration_number'] == registration_number:
                registration = reg
                break
        
        if not registration:
            return jsonify({
                'success': False,
                'message': 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨'
            }), 404
        
        return jsonify({
            'success': True,
            'registration': registration
        })
        
    except Exception as e:
        return jsonify({
            'success': False,
            'message': f'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: {str(e)}'
        }), 500

@registration_bp.route('/api/registration/<registration_number>/status', methods=['PUT'])
def update_registration_status(registration_number):
    """ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„"""
    try:
        import json
        registrations_file = 'data/registrations.json'
        
        if not os.path.exists(registrations_file):
            return jsonify({
                'success': False,
                'message': 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨'
            }), 404
        
        data = request.get_json()
        new_status = data.get('status')
        notes = data.get('notes', '')
        
        # Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³Ø¬Ù„Ø§Øª
        with open(registrations_file, 'r', encoding='utf-8') as f:
            registrations = json.load(f)
        
        # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨ ÙˆØªØ­Ø¯ÙŠØ«Ù‡
        updated = False
        for reg in registrations:
            if reg['registration_number'] == registration_number:
                reg['status'] = new_status
                reg['updated_at'] = datetime.now().isoformat()
                if notes:
                    if 'notes' not in reg:
                        reg['notes'] = []
                    reg['notes'].append({
                        'note': notes,
                        'timestamp': datetime.now().isoformat()
                    })
                updated = True
                break
        
        if not updated:
            return jsonify({
                'success': False,
                'message': 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨'
            }), 404
        
        # Ø­ÙØ¸ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª
        with open(registrations_file, 'w', encoding='utf-8') as f:
            json.dump(registrations, f, ensure_ascii=False, indent=2)
        
        return jsonify({
            'success': True,
            'message': 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­'
        })
        
    except Exception as e:
        return jsonify({
            'success': False,
            'message': f'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ«: {str(e)}'
        }), 500

@registration_bp.route('/api/registration/stats', methods=['GET'])
def get_registration_stats():
    """Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„"""
    try:
        import json
        registrations_file = 'data/registrations.json'
        
        if not os.path.exists(registrations_file):
            return jsonify({
                'success': True,
                'stats': {
                    'total': 0,
                    'pending': 0,
                    'approved': 0,
                    'rejected': 0,
                    'today': 0,
                    'this_week': 0,
                    'this_month': 0
                }
            })
        
        with open(registrations_file, 'r', encoding='utf-8') as f:
            registrations = json.load(f)
        
        from datetime import datetime, timedelta
        
        now = datetime.now()
        today = now.date()
        week_ago = now - timedelta(days=7)
        month_ago = now - timedelta(days=30)
        
        stats = {
            'total': len(registrations),
            'pending': 0,
            'approved': 0,
            'rejected': 0,
            'today': 0,
            'this_week': 0,
            'this_month': 0
        }
        
        for reg in registrations:
            # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„Ø©
            status = reg.get('status', 'pending_review')
            if status == 'pending_review':
                stats['pending'] += 1
            elif status == 'approved':
                stats['approved'] += 1
            elif status == 'rejected':
                stats['rejected'] += 1
            
            # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ§Ø±ÙŠØ®
            submission_date = datetime.fromisoformat(reg['submission_date']).date()
            if submission_date == today:
                stats['today'] += 1
            if datetime.fromisoformat(reg['submission_date']) >= week_ago:
                stats['this_week'] += 1
            if datetime.fromisoformat(reg['submission_date']) >= month_ago:
                stats['this_month'] += 1
        
        return jsonify({
            'success': True,
            'stats': stats
        })
        
    except Exception as e:
        return jsonify({
            'success': False,
            'message': f'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: {str(e)}'
        }), 500


from flask import Blueprint, request, jsonify, current_app
from src.models.user import db, User, Child, Attendance
from src.routes.auth import token_required, admin_required
from datetime import datetime, date
from sqlalchemy import and_, func

attendance_bp = Blueprint('attendance', __name__)

@attendance_bp.route('/scan-qr', methods=['POST'])
@token_required
def scan_qr_code(current_user):
    """Ù…Ø³Ø­ QR Code Ù„Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù (Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙÙ‚Ø·)"""
    try:
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¸Ù
        if current_user.role not in ['staff', 'admin']:
            return jsonify({'message': 'Only staff can scan QR codes'}), 403
        
        data = request.get_json()
        qr_code = data.get('qr_code')
        
        if not qr_code:
            return jsonify({'message': 'QR code is required'}), 400
        
        # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·ÙÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© QR Code
        child = Child.query.filter_by(qr_code=qr_code, is_approved=True, is_active=True).first()
        
        if not child:
            return jsonify({'message': 'Invalid QR code or child not approved'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¢Ø®Ø± Ø­Ø§Ù„Ø© Ø­Ø¶ÙˆØ± Ù„Ù„Ø·ÙÙ„ Ø§Ù„ÙŠÙˆÙ…
        today = date.today()
        last_attendance = Attendance.query.filter(
            and_(
                Attendance.child_id == child.id,
                func.date(Attendance.timestamp) == today
            )
        ).order_by(Attendance.timestamp.desc()).first()
        
        # ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Ø¯Ø®ÙˆÙ„ Ø£Ù… Ø®Ø±ÙˆØ¬)
        if not last_attendance or last_attendance.status == 'check_out':
            # Ø§Ù„Ø·ÙÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ Ø®Ø±Ø¬ØŒ ÙÙ‡Ø°Ø§ Ø¯Ø®ÙˆÙ„
            status = 'check_in'
            message = f'{child.name} ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„Ù‡ Ø¨Ù†Ø¬Ø§Ø­'
        else:
            # Ø§Ù„Ø·ÙÙ„ Ù…ÙˆØ¬ÙˆØ¯ØŒ ÙÙ‡Ø°Ø§ Ø®Ø±ÙˆØ¬
            status = 'check_out'
            message = f'{child.name} ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ù‡ Ø¨Ù†Ø¬Ø§Ø­'
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± Ø¬Ø¯ÙŠØ¯
        attendance = Attendance(
            child_id=child.id,
            staff_id=current_user.id,
            status=status,
            notes=data.get('notes')
        )
        
        db.session.add(attendance)
        db.session.commit()
        
        # Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± (TODO: ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª)
        
        return jsonify({
            'message': message,
            'attendance': attendance.to_dict(),
            'child': child.to_dict(),
            'status': status
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Failed to process QR scan: {str(e)}'}), 500

@attendance_bp.route('/child/<int:child_id>/today', methods=['GET'])
@token_required
def get_child_attendance_today(current_user, child_id):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ø¶ÙˆØ± Ø·ÙÙ„ Ù…Ø­Ø¯Ø¯ Ù„Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ"""
    try:
        child = Child.query.get(child_id)
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        if current_user.role == 'parent' and child.parent_id != current_user.id:
            return jsonify({'message': 'Access denied'}), 403
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…
        today = date.today()
        attendance_records = Attendance.query.filter(
            and_(
                Attendance.child_id == child_id,
                func.date(Attendance.timestamp) == today
            )
        ).order_by(Attendance.timestamp.asc()).all()
        
        # ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        current_status = 'absent'
        if attendance_records:
            last_record = attendance_records[-1]
            current_status = 'present' if last_record.status == 'check_in' else 'absent'
        
        return jsonify({
            'child': child.to_dict(),
            'current_status': current_status,
            'attendance_records': [record.to_dict() for record in attendance_records]
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get attendance: {str(e)}'}), 500

@attendance_bp.route('/today', methods=['GET'])
@token_required
def get_today_attendance(current_user):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ø¶ÙˆØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø·ÙØ§Ù„ Ù„Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø©)"""
    try:
        if current_user.role not in ['staff', 'admin']:
            return jsonify({'message': 'Access denied'}), 403
        
        today = date.today()
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ÙŠÙ†
        children = Child.query.filter_by(is_approved=True, is_active=True).all()
        
        attendance_summary = []
        
        for child in children:
            # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¢Ø®Ø± Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± Ù„Ù‡Ø°Ø§ Ø§Ù„Ø·ÙÙ„ Ø§Ù„ÙŠÙˆÙ…
            last_attendance = Attendance.query.filter(
                and_(
                    Attendance.child_id == child.id,
                    func.date(Attendance.timestamp) == today
                )
            ).order_by(Attendance.timestamp.desc()).first()
            
            status = 'absent'
            last_action_time = None
            
            if last_attendance:
                status = 'present' if last_attendance.status == 'check_in' else 'absent'
                last_action_time = last_attendance.timestamp.isoformat()
            
            child_data = child.to_dict()
            child_data['parent'] = child.parent.to_dict()
            child_data['current_status'] = status
            child_data['last_action_time'] = last_action_time
            
            attendance_summary.append(child_data)
        
        # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©
        present_count = sum(1 for child in attendance_summary if child['current_status'] == 'present')
        absent_count = len(attendance_summary) - present_count
        
        return jsonify({
            'date': today.isoformat(),
            'summary': {
                'total_children': len(attendance_summary),
                'present': present_count,
                'absent': absent_count
            },
            'children': attendance_summary
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get today attendance: {str(e)}'}), 500

@attendance_bp.route('/child/<int:child_id>/history', methods=['GET'])
@token_required
def get_child_attendance_history(current_user, child_id):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ø­Ø¶ÙˆØ± Ø·ÙÙ„ Ù…Ø­Ø¯Ø¯"""
    try:
        child = Child.query.get(child_id)
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        if current_user.role == 'parent' and child.parent_id != current_user.id:
            return jsonify({'message': 'Access denied'}), 403
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
        days = request.args.get('days', 30, type=int)  # Ø¢Ø®Ø± 30 ÙŠÙˆÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±
        attendance_records = Attendance.query.filter_by(child_id=child_id)\
            .order_by(Attendance.timestamp.desc())\
            .limit(days * 4).all()  # ØªÙ‚Ø¯ÙŠØ± 4 Ø³Ø¬Ù„Ø§Øª ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰ ÙÙŠ Ø§Ù„ÙŠÙˆÙ…
        
        # ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
        daily_attendance = {}
        
        for record in attendance_records:
            record_date = record.timestamp.date().isoformat()
            
            if record_date not in daily_attendance:
                daily_attendance[record_date] = {
                    'date': record_date,
                    'records': [],
                    'status': 'absent'
                }
            
            daily_attendance[record_date]['records'].append(record.to_dict())
            
            # ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ù„ÙŠÙˆÙ…
            if record.status == 'check_in':
                daily_attendance[record_date]['status'] = 'present'
        
        # ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
        sorted_attendance = sorted(daily_attendance.values(), 
                                 key=lambda x: x['date'], reverse=True)
        
        return jsonify({
            'child': child.to_dict(),
            'attendance_history': sorted_attendance
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get attendance history: {str(e)}'}), 500

@attendance_bp.route('/stats', methods=['GET'])
@token_required
@admin_required
def get_attendance_stats(current_user):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø¶ÙˆØ± (Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙ‚Ø·)"""
    try:
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
        days = request.args.get('days', 7, type=int)  # Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù… Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
        
        # Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®
        end_date = date.today()
        start_date = date.fromordinal(end_date.toordinal() - days + 1)
        
        # Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ÙŠÙ†
        total_children = Child.query.filter_by(is_approved=True, is_active=True).count()
        
        # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙŠÙˆÙ…ÙŠØ©
        daily_stats = []
        
        for i in range(days):
            current_date = date.fromordinal(start_date.toordinal() + i)
            
            # Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…
            present_children = db.session.query(Attendance.child_id)\
                .filter(
                    and_(
                        func.date(Attendance.timestamp) == current_date,
                        Attendance.status == 'check_in'
                    )
                ).distinct().count()
            
            daily_stats.append({
                'date': current_date.isoformat(),
                'total_children': total_children,
                'present': present_children,
                'absent': total_children - present_children,
                'attendance_rate': round((present_children / total_children * 100) if total_children > 0 else 0, 2)
            })
        
        # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ø§Ù…Ø©
        avg_attendance_rate = sum(day['attendance_rate'] for day in daily_stats) / len(daily_stats) if daily_stats else 0
        
        return jsonify({
            'period': {
                'start_date': start_date.isoformat(),
                'end_date': end_date.isoformat(),
                'days': days
            },
            'summary': {
                'total_children': total_children,
                'average_attendance_rate': round(avg_attendance_rate, 2)
            },
            'daily_stats': daily_stats
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get attendance stats: {str(e)}'}), 500


#!/usr/bin/env python3
"""
Ø³ÙƒØ±ÙŠØ¨Øª Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù…Ù†ØµØ© Ø­Ø§Ø¶ÙÙ†
"""

import sqlite3
import hashlib
import uuid
from datetime import datetime, timedelta
import random

def hash_password(password):
    """ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"""
    return hashlib.sha256(password.encode()).hexdigest()

def generate_qr_code():
    """ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² QR ÙØ±ÙŠØ¯"""
    return f"QR_{uuid.uuid4().hex[:8].upper()}"

def create_test_data():
    """Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©"""
    conn = sqlite3.connect('hadhin.db')
    cursor = conn.cursor()
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS users (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            email TEXT UNIQUE NOT NULL,
            phone TEXT,
            password_hash TEXT NOT NULL,
            role TEXT CHECK(role IN ('admin','staff','parent')) NOT NULL,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
    ''')
    
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS children (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            birthdate DATE,
            parent_id INTEGER,
            qr_code TEXT UNIQUE,
            is_approved BOOLEAN DEFAULT FALSE,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (parent_id) REFERENCES users(id)
        )
    ''')
    
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS attendance (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            child_id INTEGER,
            staff_id INTEGER,
            status TEXT CHECK(status IN ('check_in','check_out')),
            timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            notes TEXT,
            FOREIGN KEY (child_id) REFERENCES children(id),
            FOREIGN KEY (staff_id) REFERENCES users(id)
        )
    ''')
    
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS daily_updates (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            child_id INTEGER,
            staff_id INTEGER,
            activity_type TEXT,
            note TEXT,
            photo_url TEXT,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (child_id) REFERENCES children(id),
            FOREIGN KEY (staff_id) REFERENCES users(id)
        )
    ''')
    
    # Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
    cursor.execute('DELETE FROM daily_updates')
    cursor.execute('DELETE FROM attendance')
    cursor.execute('DELETE FROM children')
    cursor.execute('DELETE FROM users')
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø¯Ø§Ø±ÙŠ
    cursor.execute('''
        INSERT INTO users (name, email, phone, password_hash, role)
        VALUES (?, ?, ?, ?, ?)
    ''', ('Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±', 'admin@brightkids.com', '0501234567', hash_password('admin123'), 'admin'))
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØ¸ÙÙŠÙ†
    staff_data = [
        ('ÙØ§Ø·Ù…Ø© Ø§Ù„Ù…Ø±Ø¨ÙŠØ©', 'fatima@brightkids.com', '0507654321', 'staff123'),
        ('Ø³Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø±ÙØ©', 'sara@brightkids.com', '0509876543', 'staff123'),
        ('Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ø±Ø¨ÙŠ', 'mohammed.staff@brightkids.com', '0502468135', 'staff123'),
    ]
    
    staff_ids = []
    for name, email, phone, password in staff_data:
        cursor.execute('''
            INSERT INTO users (name, email, phone, password_hash, role)
            VALUES (?, ?, ?, ?, ?)
        ''', (name, email, phone, hash_password(password), 'staff'))
        staff_ids.append(cursor.lastrowid)
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø£Ù…ÙˆØ±
    parents_data = [
        ('Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯', 'mohammed.parent@gmail.com', '0509876543', 'parent123'),
        ('Ø¹Ù„ÙŠ Ø­Ø³Ù†', 'ali.hassan@gmail.com', '0507654321', 'parent123'),
        ('Ø®Ø§Ù„Ø¯ ÙŠÙˆØ³Ù', 'khalid.youssef@gmail.com', '0501357924', 'parent123'),
        ('Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø³Ø§Ù„Ù…', 'abdullah.salem@gmail.com', '0508642097', 'parent123'),
        ('Ø£Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù†', 'ahmed.abdulrahman@gmail.com', '0505432109', 'parent123'),
    ]
    
    parent_ids = []
    for name, email, phone, password in parents_data:
        cursor.execute('''
            INSERT INTO users (name, email, phone, password_hash, role)
            VALUES (?, ?, ?, ?, ?)
        ''', (name, email, phone, hash_password(password), 'parent'))
        parent_ids.append(cursor.lastrowid)
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø·ÙØ§Ù„
    children_data = [
        ('Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', '2020-05-15', parent_ids[0], True),
        ('ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ', '2019-08-22', parent_ids[1], True),
        ('ÙŠÙˆØ³Ù Ø®Ø§Ù„Ø¯', '2021-03-10', parent_ids[2], True),
        ('Ù…Ø±ÙŠÙ… Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡', '2020-11-05', parent_ids[3], True),
        ('Ø¹Ù…Ø± Ø£Ø­Ù…Ø¯', '2019-12-18', parent_ids[4], True),
        ('Ù†ÙˆØ± Ù…Ø­Ù…Ø¯', '2021-01-25', parent_ids[0], False),  # Ø·ÙÙ„ Ø«Ø§Ù†ÙŠ Ù„Ù†ÙØ³ Ø§Ù„ÙˆØ§Ù„Ø¯
        ('Ø³Ø§Ø±Ø© Ø¹Ù„ÙŠ', '2020-07-30', parent_ids[1], False),   # Ø·ÙÙ„ Ø«Ø§Ù†ÙŠ Ù„Ù†ÙØ³ Ø§Ù„ÙˆØ§Ù„Ø¯
        ('Ø­Ø³Ø§Ù… Ø®Ø§Ù„Ø¯', '2021-09-12', parent_ids[2], False),  # Ø·ÙÙ„ Ø«Ø§Ù„Ø« Ù…Ù†ØªØ¸Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
    ]
    
    child_ids = []
    for name, birthdate, parent_id, is_approved in children_data:
        qr_code = generate_qr_code()
        cursor.execute('''
            INSERT INTO children (name, birthdate, parent_id, qr_code, is_approved)
            VALUES (?, ?, ?, ?, ?)
        ''', (name, birthdate, parent_id, qr_code, is_approved))
        child_ids.append(cursor.lastrowid)
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„Ø§Øª Ø­Ø¶ÙˆØ± Ù„Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ
    approved_children = child_ids[:5]  # Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„ÙŠÙ† ÙÙ‚Ø·
    
    for day_offset in range(7):
        date = datetime.now() - timedelta(days=day_offset)
        
        for child_id in approved_children:
            # Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø­Ø¶ÙˆØ± 85%
            if random.random() < 0.85:
                staff_id = random.choice(staff_ids)
                
                # ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
                check_in_time = date.replace(hour=random.randint(7, 9), minute=random.randint(0, 59))
                cursor.execute('''
                    INSERT INTO attendance (child_id, staff_id, status, timestamp, notes)
                    VALUES (?, ?, ?, ?, ?)
                ''', (child_id, staff_id, 'check_in', check_in_time, 'Ø­Ø¶ÙˆØ± Ø¹Ø§Ø¯ÙŠ'))
                
                # ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ (Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© 90%)
                if random.random() < 0.9:
                    check_out_time = date.replace(hour=random.randint(14, 16), minute=random.randint(0, 59))
                    cursor.execute('''
                        INSERT INTO attendance (child_id, staff_id, status, timestamp, notes)
                        VALUES (?, ?, ?, ?, ?)
                    ''', (child_id, staff_id, 'check_out', check_out_time, 'Ø§Ù†ØµØ±Ø§Ù Ø¹Ø§Ø¯ÙŠ'))
    
    # Ø¥Ù†Ø´Ø§Ø¡ ØªØ­Ø¯ÙŠØ«Ø§Øª ÙŠÙˆÙ…ÙŠØ©
    activity_types = [
        ('Ø£ÙƒÙ„', 'ğŸ½ï¸'),
        ('Ù†ÙˆÙ…', 'ğŸ˜´'),
        ('Ù„Ø¹Ø¨', 'ğŸ®'),
        ('ØªØ¹Ù„Ù…', 'ğŸ“š'),
        ('Ø±ÙŠØ§Ø¶Ø©', 'âš½'),
        ('ÙÙ†', 'ğŸ¨'),
        ('Ù…ÙˆØ³ÙŠÙ‚Ù‰', 'ğŸµ'),
        ('Ø·Ø¨ÙŠ', 'ğŸ¥')
    ]
    
    sample_notes = [
        'ØªÙ†Ø§ÙˆÙ„ ÙˆØ¬Ø¨Ø© Ø§Ù„Ø¥ÙØ·Ø§Ø± Ø¨Ø´Ù‡ÙŠØ© Ø¬ÙŠØ¯Ø©',
        'Ù†Ø§Ù… Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹ØªÙŠÙ† Ø¨Ù‡Ø¯ÙˆØ¡',
        'Ù„Ø¹Ø¨ Ù…Ø¹ Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø¨Ù…Ø±Ø­',
        'ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø­Ù…Ø§Ø³',
        'Ù…Ø§Ø±Ø³ Ø§Ù„Ø±ÙŠØ§Ø¶Ø© ÙÙŠ Ø§Ù„Ø­Ø¯ÙŠÙ‚Ø©',
        'Ø±Ø³Ù… Ù„ÙˆØ­Ø© Ø¬Ù…ÙŠÙ„Ø© Ø¨Ø§Ù„Ø£Ù„ÙˆØ§Ù†',
        'ØºÙ†Ù‰ Ø£ØºÙ†ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©',
        'ÙØ­Øµ Ø·Ø¨ÙŠ Ø±ÙˆØªÙŠÙ†ÙŠ - ÙƒÙ„ Ø´ÙŠØ¡ Ø·Ø¨ÙŠØ¹ÙŠ',
        'Ø´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ',
        'Ø£Ø¸Ù‡Ø± ØªØ­Ø³Ù†Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø­Ø±ÙƒÙŠØ©',
    ]
    
    for day_offset in range(5):  # Ø¢Ø®Ø± 5 Ø£ÙŠØ§Ù…
        date = datetime.now() - timedelta(days=day_offset)
        
        for child_id in approved_children:
            # Ø¥Ù†Ø´Ø§Ø¡ 2-4 ØªØ­Ø¯ÙŠØ«Ø§Øª Ù„ÙƒÙ„ Ø·ÙÙ„ ÙŠÙˆÙ…ÙŠØ§Ù‹
            num_updates = random.randint(2, 4)
            
            for _ in range(num_updates):
                activity_type, icon = random.choice(activity_types)
                note = random.choice(sample_notes)
                staff_id = random.choice(staff_ids)
                
                update_time = date.replace(
                    hour=random.randint(8, 15),
                    minute=random.randint(0, 59)
                )
                
                cursor.execute('''
                    INSERT INTO daily_updates (child_id, staff_id, activity_type, note, created_at)
                    VALUES (?, ?, ?, ?, ?)
                ''', (child_id, staff_id, activity_type, note, update_time))
    
    conn.commit()
    conn.close()
    
    print("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!")
    print("\nğŸ“Š Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©:")
    print("- 1 Ù…Ø¯ÙŠØ±")
    print("- 3 Ù…ÙˆØ¸ÙÙŠÙ†")
    print("- 5 Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø£Ù…ÙˆØ±")
    print("- 8 Ø£Ø·ÙØ§Ù„ (5 Ù…Ù‚Ø¨ÙˆÙ„ÙŠÙ†ØŒ 3 ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±)")
    print("- Ø³Ø¬Ù„Ø§Øª Ø­Ø¶ÙˆØ± Ù„Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…")
    print("- ØªØ­Ø¯ÙŠØ«Ø§Øª ÙŠÙˆÙ…ÙŠØ© Ù„Ø¢Ø®Ø± 5 Ø£ÙŠØ§Ù…")
    
    print("\nğŸ” Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:")
    print("Ø§Ù„Ù…Ø¯ÙŠØ±: admin@brightkids.com / admin123")
    print("Ø§Ù„Ù…ÙˆØ¸Ù: fatima@brightkids.com / staff123")
    print("ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±: mohammed.parent@gmail.com / parent123")

if __name__ == '__main__':
    create_test_data()


from flask import Blueprint, request, jsonify, current_app
from werkzeug.security import generate_password_hash, check_password_hash
from src.models.user import db, User, Child
import jwt
from datetime import datetime, timedelta
from functools import wraps
import uuid

auth_bp = Blueprint('auth', __name__)

def token_required(f):
    """Decorator Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© JWT Token"""
    @wraps(f)
    def decorated(*args, **kwargs):
        token = request.headers.get('Authorization')
        
        if not token:
            return jsonify({'message': 'Token is missing!'}), 401
        
        try:
            if token.startswith('Bearer '):
                token = token[7:]
            
            data = jwt.decode(token, current_app.config['SECRET_KEY'], algorithms=['HS256'])
            current_user = User.query.filter_by(id=data['user_id']).first()
            
            if not current_user:
                return jsonify({'message': 'Token is invalid!'}), 401
                
        except jwt.ExpiredSignatureError:
            return jsonify({'message': 'Token has expired!'}), 401
        except jwt.InvalidTokenError:
            return jsonify({'message': 'Token is invalid!'}), 401
        
        return f(current_user, *args, **kwargs)
    
    return decorated

def admin_required(f):
    """Decorator Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"""
    @wraps(f)
    def decorated(current_user, *args, **kwargs):
        if current_user.role != 'admin':
            return jsonify({'message': 'Admin access required!'}), 403
        return f(current_user, *args, **kwargs)
    
    return decorated

@auth_bp.route('/register/parent', methods=['POST'])
def register_parent():
    """ØªØ³Ø¬ÙŠÙ„ ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø¬Ø¯ÙŠØ¯"""
    try:
        data = request.get_json()
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        required_fields = ['name', 'email', 'password', 'phone']
        for field in required_fields:
            if not data.get(field):
                return jsonify({'message': f'{field} is required'}), 400
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹
        if User.query.filter_by(email=data['email']).first():
            return jsonify({'message': 'Email already exists'}), 400
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
        user = User(
            name=data['name'],
            email=data['email'],
            phone=data['phone'],
            role='parent'
        )
        user.set_password(data['password'])
        user.generate_verification_token()
        
        db.session.add(user)
        db.session.commit()
        
        # ØªÙˆÙ„ÙŠØ¯ JWT Token
        token = jwt.encode({
            'user_id': user.id,
            'exp': datetime.utcnow() + timedelta(days=30)
        }, current_app.config['SECRET_KEY'], algorithm='HS256')
        
        return jsonify({
            'message': 'Parent registered successfully',
            'token': token,
            'user': user.to_dict()
        }), 201
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Registration failed: {str(e)}'}), 500

@auth_bp.route('/register/staff', methods=['POST'])
def register_staff():
    """ØªØ³Ø¬ÙŠÙ„ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯ (ÙŠØªØ·Ù„Ø¨ Ø¯Ø¹ÙˆØ© Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©)"""
    try:
        data = request.get_json()
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        required_fields = ['name', 'email', 'password', 'phone']
        for field in required_fields:
            if not data.get(field):
                return jsonify({'message': f'{field} is required'}), 400
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø¹ÙˆØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - ÙŠÙ…ÙƒÙ† ØªØ·ÙˆÙŠØ±Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹)
        invitation_code = data.get('invitation_code')
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹
        if User.query.filter_by(email=data['email']).first():
            return jsonify({'message': 'Email already exists'}), 400
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
        user = User(
            name=data['name'],
            email=data['email'],
            phone=data['phone'],
            role='staff',
            is_verified=True  # Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙŠØªÙ… ØªÙØ¹ÙŠÙ„Ù‡Ù… Ù…Ø¨Ø§Ø´Ø±Ø©
        )
        user.set_password(data['password'])
        
        db.session.add(user)
        db.session.commit()
        
        # ØªÙˆÙ„ÙŠØ¯ JWT Token
        token = jwt.encode({
            'user_id': user.id,
            'exp': datetime.utcnow() + timedelta(days=30)
        }, current_app.config['SECRET_KEY'], algorithm='HS256')
        
        return jsonify({
            'message': 'Staff registered successfully',
            'token': token,
            'user': user.to_dict()
        }), 201
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Registration failed: {str(e)}'}), 500

@auth_bp.route('/login', methods=['POST'])
def login():
    """ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"""
    try:
        data = request.get_json()
        
        if not data.get('email') or not data.get('password'):
            return jsonify({'message': 'Email and password are required'}), 400
        
        user = User.query.filter_by(email=data['email']).first()
        
        if not user or not user.check_password(data['password']):
            return jsonify({'message': 'Invalid email or password'}), 401
        
        if not user.is_active:
            return jsonify({'message': 'Account is deactivated'}), 401
        
        # ØªÙˆÙ„ÙŠØ¯ JWT Token
        token = jwt.encode({
            'user_id': user.id,
            'exp': datetime.utcnow() + timedelta(days=30)
        }, current_app.config['SECRET_KEY'], algorithm='HS256')
        
        return jsonify({
            'message': 'Login successful',
            'token': token,
            'user': user.to_dict()
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Login failed: {str(e)}'}), 500

@auth_bp.route('/forgot-password', methods=['POST'])
def forgot_password():
    """Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"""
    try:
        data = request.get_json()
        
        if not data.get('email'):
            return jsonify({'message': 'Email is required'}), 400
        
        user = User.query.filter_by(email=data['email']).first()
        
        if not user:
            return jsonify({'message': 'Email not found'}), 404
        
        # ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
        reset_token = user.generate_reset_token()
        db.session.commit()
        
        # Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ SMS
        # TODO: Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        
        return jsonify({
            'message': 'Password reset token generated',
            'reset_token': reset_token  # ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ØŒ Ù„Ø§ Ù†Ø±Ø³Ù„ Ø§Ù„Ø±Ù…Ø² ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Failed to generate reset token: {str(e)}'}), 500

@auth_bp.route('/reset-password', methods=['POST'])
def reset_password():
    """Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"""
    try:
        data = request.get_json()
        
        required_fields = ['reset_token', 'new_password']
        for field in required_fields:
            if not data.get(field):
                return jsonify({'message': f'{field} is required'}), 400
        
        user = User.query.filter_by(reset_token=data['reset_token']).first()
        
        if not user:
            return jsonify({'message': 'Invalid reset token'}), 400
        
        if user.reset_token_expires and user.reset_token_expires < datetime.utcnow():
            return jsonify({'message': 'Reset token has expired'}), 400
        
        # ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        user.set_password(data['new_password'])
        user.reset_token = None
        user.reset_token_expires = None
        
        db.session.commit()
        
        return jsonify({'message': 'Password reset successfully'}), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Password reset failed: {str(e)}'}), 500

@auth_bp.route('/profile', methods=['GET'])
@token_required
def get_profile(current_user):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ"""
    return jsonify({
        'user': current_user.to_dict()
    }), 200

@auth_bp.route('/profile', methods=['PUT'])
@token_required
def update_profile(current_user):
    """ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ"""
    try:
        data = request.get_json()
        
        # ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©
        if data.get('name'):
            current_user.name = data['name']
        if data.get('phone'):
            current_user.phone = data['phone']
        
        current_user.updated_at = datetime.utcnow()
        db.session.commit()
        
        return jsonify({
            'message': 'Profile updated successfully',
            'user': current_user.to_dict()
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Profile update failed: {str(e)}'}), 500


from flask import Blueprint, request, jsonify, current_app
from src.models.user import db, User, Child
from src.routes.auth import token_required, admin_required
from datetime import datetime
import uuid

children_bp = Blueprint('children', __name__)

@children_bp.route('/add', methods=['POST'])
@token_required
def add_child(current_user):
    """Ø¥Ø¶Ø§ÙØ© Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯ (ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± ÙÙ‚Ø·)"""
    try:
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‡Ùˆ ÙˆÙ„ÙŠ Ø£Ù…Ø±
        if current_user.role != 'parent':
            return jsonify({'message': 'Only parents can add children'}), 403
        
        data = request.get_json()
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        if not data.get('name'):
            return jsonify({'message': 'Child name is required'}), 400
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·ÙÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        child = Child(
            name=data['name'],
            birthdate=datetime.strptime(data['birthdate'], '%Y-%m-%d').date() if data.get('birthdate') else None,
            parent_id=current_user.id,
            photo_url=data.get('photo_url'),
            is_approved=False  # ÙŠØ­ØªØ§Ø¬ Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
        )
        
        db.session.add(child)
        db.session.flush()  # Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ID Ø§Ù„Ø·ÙÙ„
        
        # ØªÙˆÙ„ÙŠØ¯ QR Code
        child.generate_qr_code()
        
        db.session.commit()
        
        return jsonify({
            'message': 'Child added successfully. Waiting for admin approval.',
            'child': child.to_dict()
        }), 201
        
    except ValueError as e:
        return jsonify({'message': 'Invalid date format. Use YYYY-MM-DD'}), 400
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Failed to add child: {str(e)}'}), 500

@children_bp.route('/my-children', methods=['GET'])
@token_required
def get_my_children(current_user):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø£Ø·ÙØ§Ù„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"""
    try:
        if current_user.role != 'parent':
            return jsonify({'message': 'Only parents can view their children'}), 403
        
        children = Child.query.filter_by(parent_id=current_user.id, is_active=True).all()
        
        return jsonify({
            'children': [child.to_dict() for child in children]
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get children: {str(e)}'}), 500

@children_bp.route('/pending-approval', methods=['GET'])
@token_required
@admin_required
def get_pending_children(current_user):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ù…Ù†ØªØ¸Ø±ÙŠÙ† Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© (Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙ‚Ø·)"""
    try:
        children = Child.query.filter_by(is_approved=False, is_active=True).all()
        
        children_with_parents = []
        for child in children:
            child_dict = child.to_dict()
            child_dict['parent'] = child.parent.to_dict()
            children_with_parents.append(child_dict)
        
        return jsonify({
            'pending_children': children_with_parents
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get pending children: {str(e)}'}), 500

@children_bp.route('/<int:child_id>/approve', methods=['POST'])
@token_required
@admin_required
def approve_child(current_user, child_id):
    """Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø·ÙÙ„ (Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙ‚Ø·)"""
    try:
        child = Child.query.get(child_id)
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        child.is_approved = True
        child.updated_at = datetime.utcnow()
        
        db.session.commit()
        
        return jsonify({
            'message': 'Child approved successfully',
            'child': child.to_dict()
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Failed to approve child: {str(e)}'}), 500

@children_bp.route('/<int:child_id>/reject', methods=['POST'])
@token_required
@admin_required
def reject_child(current_user, child_id):
    """Ø±ÙØ¶ Ø·ÙÙ„ (Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙ‚Ø·)"""
    try:
        child = Child.query.get(child_id)
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        data = request.get_json()
        rejection_reason = data.get('reason', 'No reason provided')
        
        # ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„
        child.is_active = False
        child.updated_at = datetime.utcnow()
        
        db.session.commit()
        
        return jsonify({
            'message': 'Child rejected successfully',
            'reason': rejection_reason
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Failed to reject child: {str(e)}'}), 500

@children_bp.route('/all', methods=['GET'])
@token_required
@admin_required
def get_all_children(current_user):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø·ÙØ§Ù„ (Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙ‚Ø·)"""
    try:
        children = Child.query.filter_by(is_active=True).all()
        
        children_with_parents = []
        for child in children:
            child_dict = child.to_dict()
            child_dict['parent'] = child.parent.to_dict()
            children_with_parents.append(child_dict)
        
        return jsonify({
            'children': children_with_parents
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get children: {str(e)}'}), 500

@children_bp.route('/<int:child_id>', methods=['GET'])
@token_required
def get_child_details(current_user, child_id):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø·ÙÙ„ Ù…Ø­Ø¯Ø¯"""
    try:
        child = Child.query.get(child_id)
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        if current_user.role == 'parent' and child.parent_id != current_user.id:
            return jsonify({'message': 'Access denied'}), 403
        
        child_dict = child.to_dict()
        
        # Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
        if current_user.role in ['admin', 'staff']:
            child_dict['parent'] = child.parent.to_dict()
        
        return jsonify({
            'child': child_dict
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get child details: {str(e)}'}), 500

@children_bp.route('/<int:child_id>', methods=['PUT'])
@token_required
def update_child(current_user, child_id):
    """ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø·ÙÙ„"""
    try:
        child = Child.query.get(child_id)
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        if current_user.role == 'parent' and child.parent_id != current_user.id:
            return jsonify({'message': 'Access denied'}), 403
        elif current_user.role == 'staff':
            return jsonify({'message': 'Staff cannot edit child information'}), 403
        
        data = request.get_json()
        
        # ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©
        if data.get('name'):
            child.name = data['name']
        if data.get('birthdate'):
            child.birthdate = datetime.strptime(data['birthdate'], '%Y-%m-%d').date()
        if data.get('photo_url'):
            child.photo_url = data['photo_url']
        
        child.updated_at = datetime.utcnow()
        db.session.commit()
        
        return jsonify({
            'message': 'Child updated successfully',
            'child': child.to_dict()
        }), 200
        
    except ValueError as e:
        return jsonify({'message': 'Invalid date format. Use YYYY-MM-DD'}), 400
    except Exception as e:
        db.session.rollback()
        return jsonify({'message': f'Failed to update child: {str(e)}'}), 500

@children_bp.route('/<int:child_id>/qr-code', methods=['GET'])
@token_required
def get_child_qr_code(current_user, child_id):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ QR Code Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø·ÙÙ„"""
    try:
        child = Child.query.get(child_id)
        
        if not child:
            return jsonify({'message': 'Child not found'}), 404
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        if current_user.role == 'parent' and child.parent_id != current_user.id:
            return jsonify({'message': 'Access denied'}), 403
        
        if not child.is_approved:
            return jsonify({'message': 'Child is not approved yet'}), 400
        
        return jsonify({
            'child_id': child.id,
            'child_name': child.name,
            'qr_code': child.qr_code
        }), 200
        
    except Exception as e:
        return jsonify({'message': f'Failed to get QR code: {str(e)}'}), 500


/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */

.registration-form {
  font-family: 'Tajawal', Arial, sans-serif;
  direction: rtl;
}

.step-indicator {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 2rem;
}

.step-circle {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin: 0 10px;
  transition: all 0.3s ease;
}

.step-circle.active {
  background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
  color: white;
  transform: scale(1.1);
}

.step-circle.completed {
  background: linear-gradient(135deg, #6BCF7F 0%, #4CAF50 100%);
  color: white;
}

.step-circle.inactive {
  background: #e0e0e0;
  color: #999;
}

.step-line {
  width: 50px;
  height: 2px;
  background: #e0e0e0;
  transition: all 0.3s ease;
}

.step-line.completed {
  background: linear-gradient(135deg, #6BCF7F 0%, #4CAF50 100%);
}

.form-section {
  margin-bottom: 2rem;
}

.form-section h3 {
  color: #4A90E2;
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1rem;
  border-bottom: 2px solid #FF6B35;
  padding-bottom: 0.5rem;
}

.input-group {
  margin-bottom: 1.5rem;
}

.input-label {
  display: block;
  color: #333;
  font-weight: 600;
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
}

.required {
  color: #FF6B35;
}

.input-field {
  width: 100%;
  padding: 12px 16px;
  border: 2px solid #e1e5e9;
  border-radius: 8px;
  font-size: 1rem;
  transition: all 0.3s ease;
  background: white;
}

.input-field:focus {
  border-color: #4A90E2;
  box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
  outline: none;
}

.input-field:invalid {
  border-color: #e74c3c;
}

.radio-group {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.radio-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 6px;
  transition: background-color 0.3s ease;
}

.radio-item:hover {
  background-color: rgba(74, 144, 226, 0.05);
}

.checkbox-group {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.checkbox-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  cursor: pointer;
  padding: 0.75rem;
  border: 1px solid #e1e5e9;
  border-radius: 8px;
  transition: all 0.3s ease;
}

.checkbox-item:hover {
  border-color: #4A90E2;
  background-color: rgba(74, 144, 226, 0.02);
}

.checkbox-item.checked {
  border-color: #FF6B35;
  background-color: rgba(255, 107, 53, 0.05);
}

.file-upload-zone {
  border: 2px dashed #4A90E2;
  border-radius: 12px;
  padding: 2rem;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  background: rgba(74, 144, 226, 0.02);
}

.file-upload-zone:hover {
  border-color: #FF6B35;
  background: rgba(255, 107, 53, 0.05);
  transform: translateY(-2px);
}

.file-upload-zone.dragover {
  border-color: #FF6B35;
  background: rgba(255, 107, 53, 0.1);
  transform: scale(1.02);
}

.file-upload-icon {
  font-size: 3rem;
  color: #4A90E2;
  margin-bottom: 1rem;
}

.file-upload-text {
  color: #666;
  font-size: 1rem;
  margin-bottom: 0.5rem;
}

.file-upload-hint {
  color: #999;
  font-size: 0.875rem;
}

.uploaded-file {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: rgba(108, 207, 127, 0.1);
  border: 1px solid #6BCF7F;
  border-radius: 8px;
  margin-top: 0.75rem;
}

.uploaded-file-icon {
  color: #6BCF7F;
  font-size: 1.25rem;
}

.uploaded-file-name {
  color: #333;
  font-weight: 500;
  flex: 1;
}

.remove-file-btn {
  color: #e74c3c;
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 4px;
  transition: background-color 0.3s ease;
}

.remove-file-btn:hover {
  background-color: rgba(231, 76, 60, 0.1);
}

.authorized-person-card {
  border: 1px solid #e1e5e9;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1rem;
  background: white;
  transition: all 0.3s ease;
}

.authorized-person-card:hover {
  border-color: #4A90E2;
  box-shadow: 0 4px 12px rgba(74, 144, 226, 0.1);
}

.authorized-person-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
  color: #4A90E2;
  font-weight: 600;
}

.navigation-buttons {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 2rem;
  padding-top: 2rem;
  border-top: 1px solid #e1e5e9;
}

.btn {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}

.btn-primary {
  background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
  color: white;
}

.btn-primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
}

.btn-secondary {
  background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
  color: white;
}

.btn-secondary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
}

.btn-outline {
  background: transparent;
  border: 2px solid #4A90E2;
  color: #4A90E2;
}

.btn-outline:hover:not(:disabled) {
  background: #4A90E2;
  color: white;
}

.summary-section {
  background: rgba(74, 144, 226, 0.05);
  border: 1px solid rgba(74, 144, 226, 0.2);
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.summary-title {
  color: #4A90E2;
  font-size: 1.125rem;
  font-weight: 600;
  margin-bottom: 1rem;
}

.summary-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 1px solid rgba(74, 144, 226, 0.1);
}

.summary-item:last-child {
  border-bottom: none;
}

.summary-label {
  color: #666;
  font-weight: 500;
}

.summary-value {
  color: #333;
  font-weight: 600;
}

.error-message {
  color: #e74c3c;
  font-size: 0.875rem;
  margin-top: 0.25rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.success-message {
  color: #6BCF7F;
  font-size: 0.875rem;
  margin-top: 0.25rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.loading-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid #f3f3f3;
  border-top: 2px solid #4A90E2;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
@media (max-width: 768px) {
  .navigation-buttons {
    flex-direction: column;
    gap: 1rem;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
  
  .radio-group {
    flex-direction: column;
  }
  
  .step-indicator {
    flex-wrap: wrap;
  }
  
  .authorized-person-card {
    padding: 1rem;
  }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© */
@media print {
  .navigation-buttons {
    display: none;
  }
  
  .file-upload-zone {
    display: none;
  }
  
  .btn {
    display: none;
  }
}


from flask_sqlalchemy import SQLAlchemy
from werkzeug.security import generate_password_hash, check_password_hash
from datetime import datetime, timedelta
import uuid

db = SQLAlchemy()

class User(db.Model):
    __tablename__ = 'users'
    
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)
    phone = db.Column(db.String(20), nullable=True)
    password_hash = db.Column(db.String(255), nullable=False)
    role = db.Column(db.Enum('admin', 'staff', 'parent', name='user_roles'), nullable=False)
    is_active = db.Column(db.Boolean, default=True)
    is_verified = db.Column(db.Boolean, default=False)
    verification_token = db.Column(db.String(255), nullable=True)
    reset_token = db.Column(db.String(255), nullable=True)
    reset_token_expires = db.Column(db.DateTime, nullable=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
    children = db.relationship('Child', backref='parent', lazy=True, foreign_keys='Child.parent_id')
    staff_updates = db.relationship('DailyUpdate', backref='staff_member', lazy=True, foreign_keys='DailyUpdate.staff_id')
    attendance_records = db.relationship('Attendance', backref='staff_member', lazy=True, foreign_keys='Attendance.staff_id')
    
    def set_password(self, password):
        """ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"""
        self.password_hash = generate_password_hash(password)
    
    def check_password(self, password):
        """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"""
        return check_password_hash(self.password_hash, password)
    
    def generate_verification_token(self):
        """ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚"""
        self.verification_token = str(uuid.uuid4())
        return self.verification_token
    
    def generate_reset_token(self):
        """ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"""
        self.reset_token = str(uuid.uuid4())
        self.reset_token_expires = datetime.utcnow() + timedelta(hours=1)
        return self.reset_token
    
    def to_dict(self):
        """ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ù‚Ø§Ù…ÙˆØ³"""
        return {
            'id': self.id,
            'name': self.name,
            'email': self.email,
            'phone': self.phone,
            'role': self.role,
            'is_active': self.is_active,
            'is_verified': self.is_verified,
            'created_at': self.created_at.isoformat() if self.created_at else None,
            'updated_at': self.updated_at.isoformat() if self.updated_at else None
        }

class Child(db.Model):
    __tablename__ = 'children'
    
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False)
    birthdate = db.Column(db.Date, nullable=True)
    parent_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)
    qr_code = db.Column(db.String(255), unique=True, nullable=True)
    photo_url = db.Column(db.String(255), nullable=True)
    is_approved = db.Column(db.Boolean, default=False)
    is_active = db.Column(db.Boolean, default=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
    attendance_records = db.relationship('Attendance', backref='child', lazy=True)
    daily_updates = db.relationship('DailyUpdate', backref='child', lazy=True)
    
    def generate_qr_code(self):
        """ØªÙˆÙ„ÙŠØ¯ QR Code Ù„Ù„Ø·ÙÙ„"""
        self.qr_code = f"CHILD_{self.id}_{str(uuid.uuid4())[:8]}"
        return self.qr_code
    
    def to_dict(self):
        """ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ù‚Ø§Ù…ÙˆØ³"""
        return {
            'id': self.id,
            'name': self.name,
            'birthdate': self.birthdate.isoformat() if self.birthdate else None,
            'parent_id': self.parent_id,
            'qr_code': self.qr_code,
            'photo_url': self.photo_url,
            'is_approved': self.is_approved,
            'is_active': self.is_active,
            'created_at': self.created_at.isoformat() if self.created_at else None,
            'updated_at': self.updated_at.isoformat() if self.updated_at else None
        }

class Attendance(db.Model):
    __tablename__ = 'attendance'
    
    id = db.Column(db.Integer, primary_key=True)
    child_id = db.Column(db.Integer, db.ForeignKey('children.id'), nullable=False)
    staff_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)
    status = db.Column(db.Enum('check_in', 'check_out', name='attendance_status'), nullable=False)
    timestamp = db.Column(db.DateTime, default=datetime.utcnow)
    notes = db.Column(db.Text, nullable=True)
    
    def to_dict(self):
        """ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ù‚Ø§Ù…ÙˆØ³"""
        return {
            'id': self.id,
            'child_id': self.child_id,
            'staff_id': self.staff_id,
            'status': self.status,
            'timestamp': self.timestamp.isoformat() if self.timestamp else None,
            'notes': self.notes
        }

class DailyUpdate(db.Model):
    __tablename__ = 'daily_updates'
    
    id = db.Column(db.Integer, primary_key=True)
    child_id = db.Column(db.Integer, db.ForeignKey('children.id'), nullable=False)
    staff_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)
    note = db.Column(db.Text, nullable=True)
    photo_url = db.Column(db.String(255), nullable=True)
    video_url = db.Column(db.String(255), nullable=True)
    activity_type = db.Column(db.String(50), nullable=True)  # Ø£ÙƒÙ„ØŒ Ù†ÙˆÙ…ØŒ Ù„Ø¹Ø¨ØŒ ØªØ¹Ù„Ù…
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    
    def to_dict(self):
        """ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ù‚Ø§Ù…ÙˆØ³"""
        return {
            'id': self.id,
            'child_id': self.child_id,
            'staff_id': self.staff_id,
            'note': self.note,
            'photo_url': self.photo_url,
            'video_url': self.video_url,
            'activity_type': self.activity_type,
            'created_at': self.created_at.isoformat() if self.created_at else None
        }


import React, { useState } from 'react';

const SimpleForm = () => {
  const [formData, setFormData] = useState({
    childName: '',
    parentName: '',
    phone: ''
  });

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ù†Ø¬Ø§Ø­!');
    console.log(formData);
  };

  return (
    <div style={{ 
      minHeight: '100vh', 
      background: 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)',
      padding: '2rem',
      fontFamily: 'Arial, sans-serif',
      direction: 'rtl'
    }}>
      <div style={{ 
        maxWidth: '600px', 
        margin: '0 auto',
        background: 'white',
        padding: '2rem',
        borderRadius: '12px',
        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'
      }}>
        {/* Header */}
        <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
          <div style={{
            width: '80px',
            height: '80px',
            background: 'linear-gradient(135deg, #FF6B35 0%, #4A90E2 100%)',
            borderRadius: '50%',
            margin: '0 auto 1rem',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            color: 'white',
            fontSize: '24px',
            fontWeight: 'bold'
          }}>
            BK
          </div>
          <h1 style={{ 
            color: '#4A90E2', 
            fontSize: '2rem', 
            marginBottom: '0.5rem',
            fontWeight: 'bold'
          }}>
            Ø§Ø³ØªÙ…Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯
          </h1>
          <p style={{ color: '#666', margin: '0.25rem 0' }}>
            Ù…Ø±ÙƒØ² Bright Kids Ù„Ù„Ø­Ø¶Ø§Ù†Ø© - YADC7069
          </p>
          <p style={{ color: '#666', margin: '0.25rem 0' }}>
            Ø­ÙŠ Ù‚Ø±Ø·Ø¨Ø©ØŒ 46429ØŒ ÙŠÙ†Ø¨Ø¹ | +966 53 750 6160
          </p>
        </div>

        {/* Form */}
        <form onSubmit={handleSubmit}>
          <div style={{ marginBottom: '1.5rem' }}>
            <label style={{ 
              display: 'block', 
              marginBottom: '0.5rem', 
              fontWeight: 'bold',
              color: '#333'
            }}>
              Ø§Ø³Ù… Ø§Ù„Ø·ÙÙ„ *
            </label>
            <input
              type="text"
              name="childName"
              value={formData.childName}
              onChange={handleChange}
              required
              style={{
                width: '100%',
                padding: '12px',
                border: '2px solid #e1e5e9',
                borderRadius: '8px',
                fontSize: '1rem',
                transition: 'border-color 0.3s ease'
              }}
              placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø·ÙÙ„"
            />
          </div>

          <div style={{ marginBottom: '1.5rem' }}>
            <label style={{ 
              display: 'block', 
              marginBottom: '0.5rem', 
              fontWeight: 'bold',
              color: '#333'
            }}>
              Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± *
            </label>
            <input
              type="text"
              name="parentName"
              value={formData.parentName}
              onChange={handleChange}
              required
              style={{
                width: '100%',
                padding: '12px',
                border: '2px solid #e1e5e9',
                borderRadius: '8px',
                fontSize: '1rem',
                transition: 'border-color 0.3s ease'
              }}
              placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"
            />
          </div>

          <div style={{ marginBottom: '2rem' }}>
            <label style={{ 
              display: 'block', 
              marginBottom: '0.5rem', 
              fontWeight: 'bold',
              color: '#333'
            }}>
              Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *
            </label>
            <input
              type="tel"
              name="phone"
              value={formData.phone}
              onChange={handleChange}
              required
              style={{
                width: '100%',
                padding: '12px',
                border: '2px solid #e1e5e9',
                borderRadius: '8px',
                fontSize: '1rem',
                transition: 'border-color 0.3s ease'
              }}
              placeholder="+966 53 750 6160"
            />
          </div>

          <button
            type="submit"
            style={{
              width: '100%',
              padding: '12px 24px',
              background: 'linear-gradient(135deg, #FF6B35 0%, #F7931E 100%)',
              color: 'white',
              border: 'none',
              borderRadius: '8px',
              fontSize: '1.1rem',
              fontWeight: 'bold',
              cursor: 'pointer',
              transition: 'transform 0.3s ease, box-shadow 0.3s ease'
            }}
            onMouseOver={(e) => {
              e.target.style.transform = 'translateY(-2px)';
              e.target.style.boxShadow = '0 8px 25px rgba(255, 107, 53, 0.3)';
            }}
            onMouseOut={(e) => {
              e.target.style.transform = 'translateY(0)';
              e.target.style.boxShadow = 'none';
            }}
          >
            Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
          </button>
        </form>

        {/* Footer */}
        <div style={{ 
          textAlign: 'center', 
          marginTop: '2rem', 
          color: '#666',
          fontSize: '0.9rem'
        }}>
          <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ø¨Ù€ (*) Ù…Ø·Ù„ÙˆØ¨Ø©</p>
          <p style={{ marginTop: '0.5rem' }}>
            Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©: +966 53 750 6160 | 
            <a 
              href="https://www.google.com/maps/dir/?api=1&destination=24.0857962992111%2C38.0875255905884"
              target="_blank"
              rel="noopener noreferrer"
              style={{ color: '#4A90E2', textDecoration: 'none', marginRight: '0.5rem' }}
            >
              Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
            </a>
          </p>
        </div>
      </div>
    </div>
  );
};

export default SimpleForm;


import { 
  LayoutDashboard, 
  Users, 
  UserCheck, 
  BarChart3, 
  Settings, 
  MessageSquare, 
  FileText, 
  Eye,
  Phone,
  LogOut,
  ClipboardList
} from 'lucide-react';
import { Button } from '@/components/ui/button';
import { cn } from '@/lib/utils';

const Sidebar = ({ activeTab, onTabChange }) => {
  const menuItems = [
    { id: 'dashboard', icon: LayoutDashboard, label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' },
    { id: 'registrations', icon: ClipboardList, label: 'Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„' },
    { id: 'children', icon: Users, label: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø·ÙØ§Ù„' },
    { id: 'staff', icon: UserCheck, label: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†' },
    { id: 'reports', icon: BarChart3, label: 'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª' },
    { id: 'monitoring', icon: Eye, label: 'Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©' },
    { id: 'messages', icon: MessageSquare, label: 'Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª' },
    { id: 'exports', icon: FileText, label: 'ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª' },
    { id: 'settings', icon: Settings, label: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª' },
  ];

  return (
    <div className="sidebar w-64 flex flex-col">
      {/* Header */}
      <div className="p-6 border-b">
        <div className="flex items-center space-x-3 space-x-reverse">
          <img 
            src="/src/assets/bright-kids-logo.png" 
            alt="Bright Kids Logo" 
            className="w-10 h-10"
          />
          <div>
            <h1 className="text-lg font-bold text-bright-admin">Bright Kids</h1>
            <p className="text-sm text-muted-foreground">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</p>
          </div>
        </div>
      </div>

      {/* Navigation */}
      <nav className="flex-1 p-4">
        <div className="space-y-2">
          {menuItems.map((item) => {
            const Icon = item.icon;
            const isActive = activeTab === item.id;
            
            return (
              <button
                key={item.id}
                onClick={() => onTabChange(item.id)}
                className={cn(
                  "sidebar-item w-full flex items-center space-x-3 space-x-reverse text-right",
                  isActive && "active"
                )}
              >
                <Icon size={20} />
                <span className="font-medium">{item.label}</span>
              </button>
            );
          })}
        </div>
      </nav>

      {/* Footer */}
      <div className="p-4 border-t">
        <div className="space-y-3">
          {/* Emergency Contact */}
          <Button 
            variant="outline" 
            className="w-full justify-start space-x-2 space-x-reverse"
            onClick={() => window.open('tel:+966594288121')}
          >
            <Phone size={16} />
            <span>Ø§ØªØµØ§Ù„ Ø·ÙˆØ§Ø±Ø¦</span>
          </Button>
          
          {/* Admin Info */}
          <div className="flex items-center space-x-3 space-x-reverse p-3 bg-gray-50 rounded-lg">
            <div className="w-8 h-8 rounded-full bg-bright-admin flex items-center justify-center">
              <span className="text-white text-sm font-bold">Ø£</span>
            </div>
            <div className="flex-1">
              <p className="text-sm font-medium">Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±</p>
              <p className="text-xs text-muted-foreground">Ù…Ø¯ÙŠØ± Ø¹Ø§Ù…</p>
            </div>
          </div>
          
          {/* Logout */}
          <Button 
            variant="ghost" 
            className="w-full justify-start space-x-2 space-x-reverse text-bright-danger hover:text-bright-danger hover:bg-bright-danger/10"
          >
            <LogOut size={16} />
            <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
          </Button>
        </div>
      </div>
    </div>
  );
};

export default Sidebar;


import requests
import json

BASE_URL = "https://j6h5i7cpv6ny.manus.space/api"

def register_parent(name, email, phone, password):
    print(f"\n--- ØªØ³Ø¬ÙŠÙ„ ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø¬Ø¯ÙŠØ¯: {email} ---")
    url = f"{BASE_URL}/auth/register/parent"
    payload = {
        "name": name,
        "email": email,
        "phone": phone,
        "password": password
    }
    headers = {"Content-Type": "application/json"}
    try:
        response = requests.post(url, headers=headers, json=payload)
        response.raise_for_status()
        print("âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­:")
        print(json.dumps(response.json(), indent=2, ensure_ascii=False))
        return response.json()
    except requests.exceptions.RequestException as e:
        print(f"âŒ ÙØ´Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: {e}")
        if hasattr(e, 'response') and e.response is not None:
            print(f"Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: {e.response.text}")
        return None

def login_user(email, password):
    print(f"\n--- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…: {email} ---")
    url = f"{BASE_URL}/auth/login"
    payload = {
        "email": email,
        "password": password
    }
    headers = {"Content-Type": "application/json"}
    try:
        response = requests.post(url, headers=headers, json=payload)
        response.raise_for_status()
        print("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­:")
        print(json.dumps(response.json(), indent=2, ensure_ascii=False))
        return response.json().get("token")
    except requests.exceptions.RequestException as e:
        print(f"âŒ ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: {e}")
        if hasattr(e, 'response') and e.response is not None:
            print(f"Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: {e.response.text}")
        return None

def add_child(token, name, birthdate):
    print(f"\n--- Ø¥Ø¶Ø§ÙØ© Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯: {name} ---")
    url = f"{BASE_URL}/children/add"
    payload = {
        "name": name,
        "birthdate": birthdate
    }
    headers = {
        "Content-Type": "application/json",
        "Authorization": f"Bearer {token}"
    }
    try:
        response = requests.post(url, headers=headers, json=payload)
        response.raise_for_status()
        print("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·ÙÙ„ Ø¨Ù†Ø¬Ø§Ø­:")
        print(json.dumps(response.json(), indent=2, ensure_ascii=False))
        return response.json()
    except requests.exceptions.RequestException as e:
        print(f"âŒ ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·ÙÙ„: {e}")
        if hasattr(e, 'response') and e.response is not None:
            print(f"Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: {e.response.text}")
        return None

# Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
new_parent_name = "Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ"
new_parent_email = "ahmed.ali.new@example.com"
new_parent_phone = "0501234567"
new_parent_password = "password123"

# 1. ØªØ³Ø¬ÙŠÙ„ ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø¬Ø¯ÙŠØ¯
registration_result = register_parent(new_parent_name, new_parent_email, new_parent_phone, new_parent_password)

if registration_result:
    # 2. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆÙƒÙ†
    access_token = login_user(new_parent_email, new_parent_password)

    if access_token:
        # 3. Ø¥Ø¶Ø§ÙØ© Ø·ÙÙ„ Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙˆÙƒÙ†
        add_child(access_token, "Ù„ÙŠÙ„Ù‰ Ø£Ø­Ù…Ø¯", "2022-03-10")
    else:
        print("Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø·ÙÙ„ Ø¨Ø¯ÙˆÙ† ØªÙˆÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„.")
else:
    print("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø¥Ø¶Ø§ÙØ© Ø·ÙÙ„ Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±.")



import requests
import json

BASE_URL = "https://j6h5i7cpv6ny.manus.space/api"

def create_user(endpoint, user_data):
    url = f"{BASE_URL}/{endpoint}"
    headers = {"Content-Type": "application/json"}
    try:
        response = requests.post(url, headers=headers, json=user_data)
        response.raise_for_status()  # Raise an exception for HTTP errors (4xx or 5xx)
        return response.json()
    except requests.exceptions.RequestException as e:
        print(f"Error creating user: {e}")
        if hasattr(e, 'response') and e.response is not None:
            print(f"Response content: {e.response.text}")
        return None

# Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯
new_staff_data = {
    "name": "Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯",
    "email": "new.staff@brightkids.com",
    "phone": "0551234567",
    "password": "newstaff123"
}

# Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯
new_parent_data = {
    "name": "ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø¬Ø¯ÙŠØ¯",
    "email": "new.parent@gmail.com",
    "phone": "0557654321",
    "password": "newparent123"
}

print("Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯...")
staff_response = create_user("auth/register/staff", new_staff_data)
if staff_response:
    print("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­:")
    print(json.dumps(staff_response, indent=2, ensure_ascii=False))
    print(f'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: {new_staff_data["email"]}')
    print(f'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: {new_staff_data["password"]}')
else:
    print("âŒ ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯.")

print("\nØ¥Ù†Ø´Ø§Ø¡ ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø¬Ø¯ÙŠØ¯...")
parent_response = create_user("auth/register/parent", new_parent_data)
if parent_response:
    print("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­:")
    print(json.dumps(parent_response, indent=2, ensure_ascii=False))
    print(f'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: {new_parent_data["email"]}')
    print(f'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: {new_parent_data["password"]}')
else:
    print("âŒ ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯.")



import os
import sys
# DON'T CHANGE THIS !!!
sys.path.insert(0, os.path.dirname(os.path.dirname(__file__)))

from flask import Flask, send_from_directory
from flask_cors import CORS
from src.models.user import db
from src.routes.user import user_bp
from src.routes.auth import auth_bp
from src.routes.children import children_bp
from src.routes.registration import registration_bp

app = Flask(__name__, static_folder=os.path.join(os.path.dirname(__file__), 'static'))
app.config['SECRET_KEY'] = 'asdf#FGSgvasgf$5$WGT'

# ØªÙ…ÙƒÙŠÙ† CORS Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©
CORS(app)

# ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª
app.register_blueprint(user_bp, url_prefix='/api/users')
app.register_blueprint(auth_bp, url_prefix='/api/auth')
app.register_blueprint(children_bp, url_prefix='/api/children')
app.register_blueprint(registration_bp, url_prefix='/api/registration')

# Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
app.config['SQLALCHEMY_DATABASE_URI'] = f"sqlite:///{os.path.join(os.path.dirname(__file__), 'database', 'app.db')}"
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
db.init_app(app)

with app.app_context():
    db.create_all()

@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def serve(path):
    static_folder_path = app.static_folder
    if static_folder_path is None:
            return "Static folder not configured", 404

    if path != "" and os.path.exists(os.path.join(static_folder_path, path)):
        return send_from_directory(static_folder_path, path)
    else:
        index_path = os.path.join(static_folder_path, 'index.html')
        if os.path.exists(index_path):
            return send_from_directory(static_folder_path, 'index.html')
        else:
            return "index.html not found", 404


if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)

@import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Tajawal', Arial, sans-serif;
  direction: rtl;
  text-align: right;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  min-height: 100vh;
}

.form-step {
  animation: slideIn 0.3s ease-in-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.progress-bar {
  transition: width 0.3s ease-in-out;
}

.input-field {
  transition: all 0.3s ease;
}

.input-field:focus {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(74, 144, 226, 0.15);
}

.btn-primary {
  background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
  transition: all 0.3s ease;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
}

.btn-secondary {
  background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
  transition: all 0.3s ease;
}

.btn-secondary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
}

.card {
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.file-upload-area {
  border: 2px dashed #4A90E2;
  transition: all 0.3s ease;
}

.file-upload-area:hover {
  border-color: #FF6B35;
  background-color: rgba(255, 107, 53, 0.05);
}

.file-upload-area.dragover {
  border-color: #FF6B35;
  background-color: rgba(255, 107, 53, 0.1);
  transform: scale(1.02);
}

/* App.css - Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */

.App {
  text-align: center;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¹Ø§Ù…Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: 'Tajawal', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  direction: rtl;
  text-align: right;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        'bright-orange': '#FF6B35',
        'bright-blue': '#4A90E2',
        'bright-yellow': '#FFD93D',
        'bright-green': '#6BCF7F',
        'bright-purple': '#9B59B6',
        'bright-pink': '#E91E63',
      },
      fontFamily: {
        'arabic': ['Tajawal', 'Arial', 'sans-serif'],
      },
    },
  },
  plugins: [],
}


import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import tailwindcss from '@tailwindcss/vite'
import path from 'path'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react(),tailwindcss()],
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
  server: {
    host: true,
    hmr: {
      clientPort: 443,
    },
  },
})



<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø­Ø§Ø¶ÙÙ† - ØªØ·Ø¨ÙŠÙ‚ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>

import React from 'react';
import SimpleForm from './components/SimpleForm';
import './App.css';

function App() {
  return (
    <div className="App">
      <SimpleForm />
    </div>
  );
}

export default App;
